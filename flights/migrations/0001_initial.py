# Generated by Django 5.2.8 on 2025-12-18 13:33

import django.db.models.deletion
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Aircraft',
            fields=[
                ('icao_code', models.CharField(max_length=4, primary_key=True, serialize=False, verbose_name='ICAO Code')),
                ('iata_code', models.CharField(max_length=3, unique=True, verbose_name='IATA Code')),
                ('manufacturer', models.CharField(max_length=100, verbose_name='Manufacturer')),
                ('model', models.CharField(max_length=100, verbose_name='Model')),
                ('name', models.CharField(max_length=100, verbose_name='Aircraft Name')),
                ('wake_category', models.CharField(choices=[('L', 'Light'), ('M', 'Medium'), ('H', 'Heavy')], max_length=1, verbose_name='Wake Category')),
                ('engine_type', models.CharField(blank=True, max_length=50, verbose_name='Engine Type')),
                ('engine_count', models.PositiveIntegerField(default=2, verbose_name='Engine Count')),
                ('max_passengers', models.PositiveIntegerField(verbose_name='Max Passengers')),
                ('typical_seating', models.JSONField(blank=True, default=dict, verbose_name='Typical Seating')),
                ('cargo_capacity', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Cargo Capacity (kg)')),
                ('length', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Length (m)')),
                ('wingspan', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Wingspan (m)')),
                ('height', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Height (m)')),
                ('range_km', models.PositiveIntegerField(verbose_name='Range (km)')),
                ('cruise_speed', models.PositiveIntegerField(verbose_name='Cruise Speed (km/h)')),
                ('max_speed', models.PositiveIntegerField(verbose_name='Max Speed (km/h)')),
                ('gds_equipment_codes', models.JSONField(blank=True, default=dict, verbose_name='GDS Equipment Codes')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'aircraft',
                'verbose_name_plural': 'aircraft',
                'ordering': ['manufacturer', 'model'],
            },
        ),
        migrations.CreateModel(
            name='FlightItinerary',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('total_duration', models.DurationField(verbose_name='Total Duration')),
                ('total_stops', models.PositiveIntegerField(default=0, verbose_name='Total Stops')),
                ('layover_times', models.JSONField(blank=True, default=list, verbose_name='Layover Times')),
                ('is_refundable', models.BooleanField(default=False, verbose_name='Is Refundable')),
                ('is_changeable', models.BooleanField(default=False, verbose_name='Is Changeable')),
                ('is_routable', models.BooleanField(default=True, verbose_name='Is Routable')),
                ('has_baggage', models.BooleanField(default=True, verbose_name='Has Baggage')),
                ('has_meal', models.BooleanField(default=True, verbose_name='Has Meal')),
                ('cabin_class', models.CharField(max_length=20, verbose_name='Cabin Class')),
                ('fare_type', models.CharField(choices=[('published', 'Published Fare'), ('private', 'Private Fare'), ('net', 'Net Fare'), ('negotiated', 'Negotiated Fare'), ('corporate', 'Corporate Fare')], default='published', max_length=50, verbose_name='Fare Type')),
                ('base_fare', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Base Fare')),
                ('tax', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Tax')),
                ('fees', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Fees')),
                ('total_fare', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Total Fare')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('commission_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Commission Amount')),
                ('commission_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Commission Rate')),
                ('markup_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Markup Amount')),
                ('markup_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Markup Rate')),
                ('agent_price', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Agent Price')),
                ('customer_price', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Customer Price')),
                ('last_ticketing_date', models.DateTimeField(blank=True, null=True, verbose_name='Last Ticketing Date')),
                ('minimum_connection_time', models.PositiveIntegerField(default=60, verbose_name='Minimum Connection Time (min)')),
                ('gds_pcc', models.CharField(blank=True, max_length=10, verbose_name='GDS PCC')),
                ('gds_provider', models.CharField(default='travelport', max_length=20, verbose_name='GDS Provider')),
                ('gds_offer_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Offer ID')),
                ('gds_fare_calc', models.TextField(blank=True, verbose_name='GDS Fare Calculation')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('expires_at', models.DateTimeField(verbose_name='Expires At')),
                ('fare_rules', models.JSONField(blank=True, default=dict, verbose_name='Fare Rules')),
                ('baggage_info', models.JSONField(blank=True, default=dict, verbose_name='Baggage Info')),
                ('restrictions', models.JSONField(blank=True, default=dict, verbose_name='Restrictions')),
            ],
            options={
                'verbose_name': 'flight itinerary',
                'verbose_name_plural': 'flight itineraries',
                'ordering': ['total_fare'],
            },
        ),
        migrations.CreateModel(
            name='Airline',
            fields=[
                ('code', models.CharField(max_length=2, primary_key=True, serialize=False, verbose_name='IATA Code')),
                ('iata_code', models.CharField(max_length=3, unique=True, verbose_name='3-Letter IATA')),
                ('icao_code', models.CharField(max_length=4, unique=True, verbose_name='ICAO Code')),
                ('name', models.CharField(max_length=200, verbose_name='Airline Name')),
                ('name_ar', models.CharField(blank=True, max_length=200, verbose_name='Arabic Name')),
                ('airline_type', models.CharField(choices=[('scheduled', 'Scheduled'), ('charter', 'Charter'), ('low_cost', 'Low Cost'), ('regional', 'Regional')], default='scheduled', max_length=20, verbose_name='Airline Type')),
                ('country', models.CharField(max_length=100, verbose_name='Country')),
                ('country_code', models.CharField(max_length=2, verbose_name='Country Code')),
                ('logo', models.ImageField(blank=True, null=True, upload_to='airlines/logos/', verbose_name='Logo')),
                ('gds_carrier_code', models.CharField(blank=True, max_length=10, verbose_name='GDS Carrier Code')),
                ('travelport_code', models.CharField(blank=True, max_length=10, verbose_name='Travelport Code')),
                ('sabre_code', models.CharField(blank=True, max_length=10, verbose_name='Sabre Code')),
                ('amadeus_code', models.CharField(blank=True, max_length=10, verbose_name='Amadeus Code')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('commission_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Commission Rate')),
                ('preferred_supplier', models.BooleanField(default=False, verbose_name='Preferred Supplier')),
                ('baggage_policy_url', models.URLField(blank=True, verbose_name='Baggage Policy URL')),
                ('contact_email', models.EmailField(blank=True, max_length=254, verbose_name='Contact Email')),
                ('contact_phone', models.CharField(blank=True, max_length=20, verbose_name='Contact Phone')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='Metadata')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'airline',
                'verbose_name_plural': 'airlines',
                'ordering': ['name'],
                'indexes': [models.Index(fields=['code', 'is_active'], name='flights_air_code_d96136_idx'), models.Index(fields=['country', 'is_active'], name='flights_air_country_8915c1_idx')],
            },
        ),
        migrations.CreateModel(
            name='Airport',
            fields=[
                ('iata_code', models.CharField(max_length=3, primary_key=True, serialize=False, verbose_name='IATA Code')),
                ('icao_code', models.CharField(max_length=4, unique=True, verbose_name='ICAO Code')),
                ('name', models.CharField(max_length=200, verbose_name='Airport Name')),
                ('name_ar', models.CharField(blank=True, max_length=200, verbose_name='Arabic Name')),
                ('city', models.CharField(max_length=100, verbose_name='City')),
                ('city_ar', models.CharField(blank=True, max_length=100, verbose_name='Arabic City')),
                ('country', models.CharField(max_length=100, verbose_name='Country')),
                ('country_code', models.CharField(max_length=2, verbose_name='Country Code')),
                ('region', models.CharField(blank=True, max_length=100, verbose_name='Region')),
                ('airport_type', models.CharField(choices=[('international', 'International'), ('domestic', 'Domestic'), ('regional', 'Regional'), ('military', 'Military')], default='international', max_length=20, verbose_name='Airport Type')),
                ('timezone', models.CharField(max_length=50, verbose_name='Timezone')),
                ('latitude', models.DecimalField(decimal_places=6, max_digits=9, verbose_name='Latitude')),
                ('longitude', models.DecimalField(decimal_places=6, max_digits=9, verbose_name='Longitude')),
                ('elevation', models.IntegerField(blank=True, null=True, verbose_name='Elevation (ft)')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('has_international', models.BooleanField(default=True, verbose_name='Has International Flights')),
                ('has_domestic', models.BooleanField(default=True, verbose_name='Has Domestic Flights')),
                ('number_of_terminals', models.PositiveIntegerField(default=1, verbose_name='Number of Terminals')),
                ('number_of_runways', models.PositiveIntegerField(default=1, verbose_name='Number of Runways')),
                ('website', models.URLField(blank=True, verbose_name='Website')),
                ('contact_phone', models.CharField(blank=True, max_length=20, verbose_name='Contact Phone')),
                ('emergency_phone', models.CharField(blank=True, max_length=20, verbose_name='Emergency Phone')),
                ('gds_codes', models.JSONField(blank=True, default=dict, verbose_name='GDS Codes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'airport',
                'verbose_name_plural': 'airports',
                'ordering': ['city', 'name'],
                'indexes': [models.Index(fields=['iata_code', 'is_active'], name='flights_air_iata_co_c303d0_idx'), models.Index(fields=['city', 'country'], name='flights_air_city_e57452_idx'), models.Index(fields=['country_code', 'is_active'], name='flights_air_country_ee8401_idx')],
            },
        ),
        migrations.CreateModel(
            name='AncillaryService',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('service_code', models.CharField(max_length=20, unique=True, verbose_name='Service Code')),
                ('service_name', models.CharField(max_length=200, verbose_name='Service Name')),
                ('service_name_ar', models.CharField(blank=True, max_length=200, verbose_name='Service Name (Arabic)')),
                ('service_type', models.CharField(choices=[('seat_selection', 'Seat Selection'), ('extra_baggage', 'Extra Baggage'), ('meal', 'In-flight Meal'), ('lounge_access', 'Lounge Access'), ('travel_insurance', 'Travel Insurance'), ('priority_boarding', 'Priority Boarding'), ('fast_track', 'Fast Track Security'), ('hotel', 'Hotel Accommodation'), ('car_rental', 'Car Rental'), ('transfer', 'Airport Transfer'), ('activity', 'Travel Activity'), ('wifi', 'In-flight WiFi'), ('entertainment', 'Entertainment Package')], max_length=30, verbose_name='Service Type')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('description_ar', models.TextField(blank=True, verbose_name='Description (Arabic)')),
                ('features', models.JSONField(blank=True, default=list, verbose_name='Features')),
                ('terms_and_conditions', models.TextField(blank=True, verbose_name='Terms and Conditions')),
                ('provider', models.CharField(blank=True, max_length=100, verbose_name='Service Provider')),
                ('provider_code', models.CharField(blank=True, max_length=20, verbose_name='Provider Code')),
                ('is_third_party', models.BooleanField(default=False, verbose_name='Is Third Party')),
                ('pricing_type', models.CharField(choices=[('fixed', 'Fixed Price'), ('per_person', 'Per Person'), ('per_segment', 'Per Segment'), ('per_kg', 'Per Kilogram'), ('per_day', 'Per Day'), ('percentage', 'Percentage of Fare')], default='fixed', max_length=20, verbose_name='Pricing Type')),
                ('base_price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Base Price')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('commission_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Commission Rate')),
                ('applicable_cabin_classes', models.JSONField(blank=True, default=list, verbose_name='Applicable Cabin Classes')),
                ('applicable_countries', models.JSONField(blank=True, default=list, verbose_name='Applicable Countries')),
                ('is_available', models.BooleanField(default=True, verbose_name='Is Available')),
                ('available_from', models.DateField(blank=True, null=True, verbose_name='Available From')),
                ('available_until', models.DateField(blank=True, null=True, verbose_name='Available Until')),
                ('stock_quantity', models.PositiveIntegerField(blank=True, null=True, verbose_name='Stock Quantity')),
                ('sold_quantity', models.PositiveIntegerField(default=0, verbose_name='Sold Quantity')),
                ('advance_booking_days', models.PositiveIntegerField(default=0, verbose_name='Advance Booking Days')),
                ('last_minute_booking_hours', models.PositiveIntegerField(default=24, verbose_name='Last Minute Booking Hours')),
                ('maximum_per_booking', models.PositiveIntegerField(default=10, verbose_name='Maximum Per Booking')),
                ('minimum_per_booking', models.PositiveIntegerField(default=1, verbose_name='Minimum Per Booking')),
                ('gds_service_code', models.CharField(blank=True, max_length=20, verbose_name='GDS Service Code')),
                ('gds_provider_code', models.CharField(blank=True, max_length=20, verbose_name='GDS Provider Code')),
                ('ssr_code', models.CharField(blank=True, max_length=4, verbose_name='SSR Code')),
                ('image', models.ImageField(blank=True, null=True, upload_to='ancillary/services/', verbose_name='Service Image')),
                ('icon', models.CharField(blank=True, max_length=50, verbose_name='Icon Class')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('sort_order', models.PositiveIntegerField(default=0, verbose_name='Sort Order')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('applicable_airlines', models.ManyToManyField(blank=True, to='flights.airline', verbose_name='Applicable Airlines')),
                ('applicable_airports', models.ManyToManyField(blank=True, to='flights.airport', verbose_name='Applicable Airports')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_ancillary_services', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
            ],
            options={
                'verbose_name': 'ancillary service',
                'verbose_name_plural': 'ancillary services',
                'ordering': ['sort_order', 'service_name'],
            },
        ),
        migrations.CreateModel(
            name='AvailabilityCache',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('cache_key', models.CharField(db_index=True, max_length=255, unique=True, verbose_name='Cache Key')),
                ('route_hash', models.CharField(db_index=True, max_length=64, verbose_name='Route Hash')),
                ('departure_date', models.DateField(verbose_name='Departure Date')),
                ('return_date', models.DateField(blank=True, null=True, verbose_name='Return Date')),
                ('adults', models.PositiveIntegerField(default=1, verbose_name='Adults')),
                ('children', models.PositiveIntegerField(default=0, verbose_name='Children')),
                ('infants', models.PositiveIntegerField(default=0, verbose_name='Infants')),
                ('cabin_class', models.CharField(blank=True, max_length=20, verbose_name='Cabin Class')),
                ('direct_flights_only', models.BooleanField(default=False, verbose_name='Direct Flights Only')),
                ('availability_data', models.JSONField(blank=True, default=dict, verbose_name='Availability Data')),
                ('itinerary_count', models.PositiveIntegerField(default=0, verbose_name='Itinerary Count')),
                ('lowest_fare', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Lowest Fare')),
                ('highest_fare', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Highest Fare')),
                ('cache_status', models.CharField(choices=[('valid', 'Valid'), ('stale', 'Stale'), ('expired', 'Expired'), ('refreshing', 'Refreshing')], default='valid', max_length=20, verbose_name='Cache Status')),
                ('hit_count', models.PositiveIntegerField(default=0, verbose_name='Hit Count')),
                ('miss_count', models.PositiveIntegerField(default=0, verbose_name='Miss Count')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('last_accessed', models.DateTimeField(auto_now=True, verbose_name='Last Accessed')),
                ('expires_at', models.DateTimeField(verbose_name='Expires At')),
                ('gds_provider', models.CharField(blank=True, max_length=20, verbose_name='GDS Provider')),
                ('gds_session_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Session ID')),
                ('response_time_ms', models.PositiveIntegerField(default=0, verbose_name='Response Time (ms)')),
                ('data_size_kb', models.PositiveIntegerField(default=0, verbose_name='Data Size (KB)')),
                ('destination', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='availability_cache_destinations', to='flights.airport', verbose_name='Destination')),
                ('origin', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='availability_cache_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'availability cache',
                'verbose_name_plural': 'availability caches',
                'ordering': ['-last_accessed'],
            },
        ),
        migrations.CreateModel(
            name='BaggageRule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('cabin_class', models.CharField(max_length=20, verbose_name='Cabin Class')),
                ('fare_basis', models.CharField(blank=True, max_length=20, verbose_name='Fare Basis')),
                ('checked_pieces', models.PositiveIntegerField(default=0, verbose_name='Checked Pieces')),
                ('checked_weight_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Checked Weight (kg)')),
                ('checked_dimensions_cm', models.CharField(blank=True, max_length=50, verbose_name='Checked Dimensions (cm)')),
                ('cabin_pieces', models.PositiveIntegerField(default=1, verbose_name='Cabin Pieces')),
                ('cabin_weight_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Cabin Weight (kg)')),
                ('cabin_dimensions_cm', models.CharField(blank=True, max_length=50, verbose_name='Cabin Dimensions (cm)')),
                ('sports_equipment', models.BooleanField(default=False, verbose_name='Sports Equipment Allowed')),
                ('musical_instruments', models.BooleanField(default=False, verbose_name='Musical Instruments Allowed')),
                ('pets_allowed', models.BooleanField(default=False, verbose_name='Pets Allowed')),
                ('excess_price_per_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Excess Price per kg')),
                ('excess_price_per_piece', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Excess Price per Piece')),
                ('gds_rule_id', models.CharField(blank=True, max_length=50, verbose_name='GDS Rule ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('airline', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('destination', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='baggagerule_destinations', to='flights.airport')),
                ('origin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='baggagerule_origins', to='flights.airport')),
            ],
            options={
                'verbose_name': 'baggage rule',
                'verbose_name_plural': 'baggage rules',
                'ordering': ['airline', 'cabin_class'],
            },
        ),
        migrations.CreateModel(
            name='BaggageService',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('baggage_type', models.CharField(choices=[('checked', 'Checked Baggage'), ('carry_on', 'Carry-on Baggage'), ('over_size', 'Oversize Baggage'), ('sports_equipment', 'Sports Equipment'), ('musical_instrument', 'Musical Instrument'), ('pet_carrier', 'Pet Carrier'), ('fragile', 'Fragile Items'), ('valuables', 'Valuables')], default='checked', max_length=30, verbose_name='Baggage Type')),
                ('weight_limit', models.DecimalField(decimal_places=2, max_digits=6, verbose_name='Weight Limit')),
                ('weight_unit', models.CharField(choices=[('kg', 'Kilograms'), ('lb', 'Pounds')], default='kg', max_length=2, verbose_name='Weight Unit')),
                ('length_limit', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Length Limit')),
                ('width_limit', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Width Limit')),
                ('height_limit', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Height Limit')),
                ('dimension_unit', models.CharField(choices=[('cm', 'Centimeters'), ('in', 'Inches')], default='cm', max_length=2, verbose_name='Dimension Unit')),
                ('linear_limit', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True, verbose_name='Linear Limit (L+W+H)')),
                ('price_per_kg', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Price per kg')),
                ('price_per_piece', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Price per Piece')),
                ('restricted_items', models.JSONField(blank=True, default=list, verbose_name='Restricted Items')),
                ('special_handling_required', models.BooleanField(default=False, verbose_name='Special Handling Required')),
                ('handling_fee', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Handling Fee')),
                ('pre_purchase_discount', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Pre-purchase Discount')),
                ('airport_price_multiplier', models.DecimalField(decimal_places=2, default=Decimal('1.5'), max_digits=3, verbose_name='Airport Price Multiplier')),
                ('ancillary_service', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='baggage_service', to='flights.ancillaryservice', verbose_name='Ancillary Service')),
            ],
            options={
                'verbose_name': 'baggage service',
                'verbose_name_plural': 'baggage services',
            },
        ),
        migrations.CreateModel(
            name='Booking',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('booking_reference', models.CharField(max_length=10, unique=True, verbose_name='Booking Reference')),
                ('pnr', models.CharField(blank=True, max_length=10, verbose_name='PNR')),
                ('gds_booking_ref', models.CharField(blank=True, max_length=100, verbose_name='GDS Booking Reference')),
                ('cost_center', models.CharField(blank=True, max_length=50, verbose_name='Cost Center')),
                ('total_passengers', models.PositiveIntegerField(default=1, verbose_name='Total Passengers')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('confirmed', 'Confirmed'), ('ticketed', 'Ticketed'), ('cancelled', 'Cancelled'), ('voided', 'Voided'), ('refunded', 'Refunded'), ('partial_refund', 'Partially Refunded'), ('on_hold', 'On Hold'), ('waitlisted', 'Waitlisted')], default='pending', max_length=20, verbose_name='Status')),
                ('payment_status', models.CharField(choices=[('pending', 'Pending'), ('authorized', 'Authorized'), ('paid', 'Paid'), ('partial_paid', 'Partially Paid'), ('failed', 'Failed'), ('refunded', 'Refunded'), ('cancelled', 'Cancelled')], default='pending', max_length=20, verbose_name='Payment Status')),
                ('booking_source', models.CharField(choices=[('web', 'Web'), ('mobile', 'Mobile'), ('api', 'API'), ('manual', 'Manual')], default='web', max_length=50, verbose_name='Booking Source')),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Total Amount')),
                ('paid_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Paid Amount')),
                ('due_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Due Amount')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('commission_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Commission Amount')),
                ('markup_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Markup Amount')),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Discount Amount')),
                ('payment_method', models.CharField(blank=True, max_length=50, verbose_name='Payment Method')),
                ('payment_gateway', models.CharField(blank=True, max_length=50, verbose_name='Payment Gateway')),
                ('payment_transaction_id', models.CharField(blank=True, max_length=100, verbose_name='Payment Transaction ID')),
                ('payment_date', models.DateTimeField(blank=True, null=True, verbose_name='Payment Date')),
                ('ticket_time_limit', models.DateTimeField(blank=True, null=True, verbose_name='Ticket Time Limit')),
                ('ticketing_deadline', models.DateTimeField(blank=True, null=True, verbose_name='Ticketing Deadline')),
                ('void_before', models.DateTimeField(blank=True, null=True, verbose_name='Void Before')),
                ('cancellation_deadline', models.DateTimeField(blank=True, null=True, verbose_name='Cancellation Deadline')),
                ('special_instructions', models.TextField(blank=True, verbose_name='Special Instructions')),
                ('internal_notes', models.TextField(blank=True, verbose_name='Internal Notes')),
                ('customer_remarks', models.TextField(blank=True, verbose_name='Customer Remarks')),
                ('gds_pcc', models.CharField(blank=True, max_length=10, verbose_name='GDS PCC')),
                ('gds_provider', models.CharField(default='travelport', max_length=20, verbose_name='GDS Provider')),
                ('gds_queue', models.CharField(blank=True, max_length=10, verbose_name='GDS Queue')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('confirmed_at', models.DateTimeField(blank=True, null=True, verbose_name='Confirmed At')),
                ('ticketed_at', models.DateTimeField(blank=True, null=True, verbose_name='Ticketed At')),
                ('cancelled_at', models.DateTimeField(blank=True, null=True, verbose_name='Cancelled At')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='Metadata')),
                ('agent', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='flight_reservations', to=settings.AUTH_USER_MODEL, verbose_name='Agent')),
                ('corporate_client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='corporate_flight_bookings', to=settings.AUTH_USER_MODEL, verbose_name='Corporate Client')),
                ('itinerary', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='flights.flightitinerary', verbose_name='Itinerary')),
            ],
            options={
                'verbose_name': 'booking',
                'verbose_name_plural': 'bookings',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='BookingHistory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('history_type', models.CharField(choices=[('status_change', 'Status Change'), ('payment_update', 'Payment Update'), ('passenger_update', 'Passenger Update'), ('ticket_update', 'Ticket Update'), ('price_update', 'Price Update'), ('note_added', 'Note Added'), ('system_event', 'System Event'), ('manual_update', 'Manual Update')], max_length=20, verbose_name='History Type')),
                ('description', models.TextField(verbose_name='Description')),
                ('details', models.JSONField(blank=True, default=dict, verbose_name='Details')),
                ('user_type', models.CharField(choices=[('agent', 'Agent'), ('admin', 'Admin'), ('system', 'System'), ('customer', 'Customer')], default='system', max_length=20, verbose_name='User Type')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP Address')),
                ('user_agent', models.TextField(blank=True, verbose_name='User Agent')),
                ('device_info', models.JSONField(blank=True, default=dict, verbose_name='Device Information')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='history', to='flights.booking', verbose_name='Booking')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
            ],
            options={
                'verbose_name': 'booking history',
                'verbose_name_plural': 'booking histories',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CommissionRule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('rule_name', models.CharField(max_length=200, verbose_name='Rule Name')),
                ('commission_type', models.CharField(choices=[('percentage', 'Percentage'), ('fixed', 'Fixed Amount'), ('tiered', 'Tiered'), ('slab', 'Slab Based')], default='percentage', max_length=20, verbose_name='Commission Type')),
                ('commission_basis', models.CharField(choices=[('base_fare', 'Base Fare'), ('total_fare', 'Total Fare'), ('net_fare', 'Net Fare'), ('ticket_value', 'Ticket Value')], default='base_fare', max_length=20, verbose_name='Commission Basis')),
                ('agent_type', models.CharField(choices=[('all', 'All Agents'), ('super_agent', 'Super Agent'), ('agent', 'Agent'), ('sub_agent', 'Sub Agent'), ('corporate', 'Corporate')], default='all', max_length=20, verbose_name='Agent Type')),
                ('cabin_class', models.CharField(blank=True, max_length=20, verbose_name='Cabin Class')),
                ('commission_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Commission Rate')),
                ('fixed_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Fixed Amount')),
                ('tier_rules', models.JSONField(blank=True, default=list, verbose_name='Tier Rules')),
                ('effective_date', models.DateField(verbose_name='Effective Date')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='Expiry Date')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('minimum_booking_value', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Minimum Booking Value')),
                ('maximum_commission', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Maximum Commission')),
                ('domestic_only', models.BooleanField(default=False, verbose_name='Domestic Only')),
                ('international_only', models.BooleanField(default=False, verbose_name='International Only')),
                ('round_trip_only', models.BooleanField(default=False, verbose_name='Round Trip Only')),
                ('group_booking_only', models.BooleanField(default=False, verbose_name='Group Booking Only')),
                ('override_commission', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Override Commission')),
                ('bonus_commission', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Bonus Commission')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='commission_rules', to=settings.AUTH_USER_MODEL, verbose_name='Agent')),
                ('airline', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_commission_rules', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('destination', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='commission_destinations', to='flights.airport', verbose_name='Destination')),
                ('origin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='commission_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'commission rule',
                'verbose_name_plural': 'commission rules',
                'ordering': ['-effective_date'],
            },
        ),
        migrations.CreateModel(
            name='CorporateFare',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('contract_number', models.CharField(max_length=50, verbose_name='Contract Number')),
                ('contract_name', models.CharField(max_length=200, verbose_name='Contract Name')),
                ('fare_basis', models.CharField(max_length=20, verbose_name='Fare Basis')),
                ('cabin_class', models.CharField(max_length=20, verbose_name='Cabin Class')),
                ('corporate_fare_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Corporate Fare Amount')),
                ('published_fare_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Published Fare Amount')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('discount_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Discount Percentage')),
                ('discount_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=10, verbose_name='Discount Amount')),
                ('effective_date', models.DateField(verbose_name='Effective Date')),
                ('expiry_date', models.DateField(verbose_name='Expiry Date')),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('pending', 'Pending Approval'), ('expired', 'Expired')], default='active', max_length=20, verbose_name='Status')),
                ('advance_purchase_days', models.PositiveIntegerField(default=0, verbose_name='Advance Purchase Days')),
                ('minimum_stay_days', models.PositiveIntegerField(default=0, verbose_name='Minimum Stay Days')),
                ('maximum_stay_days', models.PositiveIntegerField(default=365, verbose_name='Maximum Stay Days')),
                ('allowed_passenger_types', models.JSONField(blank=True, default=list, verbose_name='Allowed Passenger Types')),
                ('maximum_passengers', models.PositiveIntegerField(blank=True, null=True, verbose_name='Maximum Passengers')),
                ('booking_channel', models.CharField(choices=[('all', 'All Channels'), ('web', 'Web Only'), ('mobile', 'Mobile Only'), ('api', 'API Only')], default='all', max_length=50, verbose_name='Booking Channel')),
                ('require_approval', models.BooleanField(default=False, verbose_name='Require Approval')),
                ('approval_workflow', models.JSONField(blank=True, default=dict, verbose_name='Approval Workflow')),
                ('monthly_quota', models.PositiveIntegerField(blank=True, null=True, verbose_name='Monthly Quota')),
                ('quarterly_quota', models.PositiveIntegerField(blank=True, null=True, verbose_name='Quarterly Quota')),
                ('yearly_quota', models.PositiveIntegerField(blank=True, null=True, verbose_name='Yearly Quota')),
                ('used_quota', models.PositiveIntegerField(default=0, verbose_name='Used Quota')),
                ('cost_centers', models.JSONField(blank=True, default=list, verbose_name='Cost Centers')),
                ('project_codes', models.JSONField(blank=True, default=list, verbose_name='Project Codes')),
                ('gds_corporate_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Corporate ID')),
                ('gds_pseudo_city_code', models.CharField(blank=True, max_length=10, verbose_name='GDS Pseudo City Code')),
                ('terms_and_conditions', models.TextField(blank=True, verbose_name='Terms and Conditions')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('airline', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('corporate_client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='corporate_fares_list', to=settings.AUTH_USER_MODEL, verbose_name='Corporate Client')),
                ('destination', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='corporate_fare_destinations', to='flights.airport', verbose_name='Destination')),
                ('origin', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='corporate_fare_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'corporate fare',
                'verbose_name_plural': 'corporate fares',
                'ordering': ['corporate_client', 'airline', 'origin'],
            },
        ),
        migrations.CreateModel(
            name='Fare',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('fare_basis', models.CharField(db_index=True, max_length=20, verbose_name='Fare Basis Code')),
                ('fare_type', models.CharField(choices=[('published', 'Published Fare'), ('private', 'Private Fare'), ('net', 'Net Fare'), ('negotiated', 'Negotiated Fare'), ('corporate', 'Corporate Fare'), ('consolidator', 'Consolidator Fare'), ('group', 'Group Fare'), ('promotional', 'Promotional Fare'), ('military', 'Military Fare'), ('student', 'Student Fare'), ('senior', 'Senior Citizen Fare')], default='published', max_length=20, verbose_name='Fare Type')),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('expired', 'Expired'), ('suspended', 'Suspended')], default='active', max_length=20, verbose_name='Status')),
                ('cabin_class', models.CharField(max_length=20, verbose_name='Cabin Class')),
                ('booking_class', models.CharField(max_length=1, verbose_name='Booking Class')),
                ('base_fare', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Base Fare')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('effective_date', models.DateField(verbose_name='Effective Date')),
                ('expiry_date', models.DateField(verbose_name='Expiry Date')),
                ('last_ticketing_date', models.DateField(blank=True, null=True, verbose_name='Last Ticketing Date')),
                ('minimum_stay', models.PositiveIntegerField(default=0, verbose_name='Minimum Stay (days)')),
                ('maximum_stay', models.PositiveIntegerField(default=365, verbose_name='Maximum Stay (days)')),
                ('advance_purchase', models.PositiveIntegerField(default=0, verbose_name='Advance Purchase (days)')),
                ('season_start', models.DateField(blank=True, null=True, verbose_name='Season Start')),
                ('season_end', models.DateField(blank=True, null=True, verbose_name='Season End')),
                ('blackout_dates', models.JSONField(blank=True, default=list, verbose_name='Blackout Dates')),
                ('day_restrictions', models.JSONField(blank=True, default=dict, verbose_name='Day Restrictions')),
                ('time_restrictions', models.JSONField(blank=True, default=dict, verbose_name='Time Restrictions')),
                ('is_refundable', models.BooleanField(default=False, verbose_name='Is Refundable')),
                ('is_changeable', models.BooleanField(default=False, verbose_name='Is Changeable')),
                ('is_routable', models.BooleanField(default=True, verbose_name='Is Routable')),
                ('is_combinable', models.BooleanField(default=True, verbose_name='Is Combinable')),
                ('cancellation_penalty', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Cancellation Penalty')),
                ('change_penalty', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Change Penalty')),
                ('no_show_penalty', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='No Show Penalty')),
                ('adult_applicable', models.BooleanField(default=True, verbose_name='Adult Applicable')),
                ('child_applicable', models.BooleanField(default=True, verbose_name='Child Applicable')),
                ('infant_applicable', models.BooleanField(default=True, verbose_name='Infant Applicable')),
                ('child_discount_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Child Discount Rate')),
                ('infant_discount_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Infant Discount Rate')),
                ('gds_fare_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Fare ID')),
                ('gds_provider', models.CharField(default='travelport', max_length=20, verbose_name='GDS Provider')),
                ('gds_fare_basis_key', models.CharField(blank=True, max_length=50, verbose_name='GDS Fare Basis Key')),
                ('contract_number', models.CharField(blank=True, max_length=50, verbose_name='Contract Number')),
                ('fare_notes', models.TextField(blank=True, verbose_name='Fare Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('airline', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('corporate_client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='corporate_fares', to=settings.AUTH_USER_MODEL, verbose_name='Corporate Client')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_fares', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('destination', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fare_destinations', to='flights.airport', verbose_name='Destination')),
                ('origin', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fare_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'fare',
                'verbose_name_plural': 'fares',
                'ordering': ['airline', 'fare_basis'],
            },
        ),
        migrations.CreateModel(
            name='FareComponent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('component_type', models.CharField(choices=[('base_fare', 'Base Fare'), ('tax', 'Tax'), ('fee', 'Fee'), ('surcharge', 'Surcharge'), ('commission', 'Commission'), ('markup', 'Markup'), ('discount', 'Discount'), ('insurance', 'Insurance'), ('service_fee', 'Service Fee')], max_length=20, verbose_name='Component Type')),
                ('code', models.CharField(max_length=10, verbose_name='Component Code')),
                ('description', models.CharField(max_length=200, verbose_name='Description')),
                ('description_ar', models.CharField(blank=True, max_length=200, verbose_name='Description (Arabic)')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Amount')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('is_percentage', models.BooleanField(default=False, verbose_name='Is Percentage')),
                ('percentage_of', models.CharField(blank=True, max_length=20, verbose_name='Percentage Of')),
                ('passenger_type', models.CharField(choices=[('ADT', 'Adult'), ('CHD', 'Child'), ('INF', 'Infant')], default='ADT', max_length=3, verbose_name='Passenger Type')),
                ('mandatory', models.BooleanField(default=True, verbose_name='Mandatory')),
                ('refundable', models.BooleanField(default=False, verbose_name='Refundable')),
                ('tax_type', models.CharField(blank=True, max_length=50, verbose_name='Tax Type')),
                ('tax_country', models.CharField(blank=True, max_length=2, verbose_name='Tax Country')),
                ('tax_authority', models.CharField(blank=True, max_length=100, verbose_name='Tax Authority')),
                ('gds_component_code', models.CharField(blank=True, max_length=10, verbose_name='GDS Component Code')),
                ('fare', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='components', to='flights.fare', verbose_name='Fare')),
            ],
            options={
                'verbose_name': 'fare component',
                'verbose_name_plural': 'fare components',
                'ordering': ['component_type', 'code'],
            },
        ),
        migrations.CreateModel(
            name='FareRule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('fare_basis', models.CharField(db_index=True, max_length=20, verbose_name='Fare Basis')),
                ('category', models.CharField(choices=[('MIN', 'Minimum Stay'), ('MAX', 'Maximum Stay'), ('PEN', 'Penalties'), ('COM', 'Combinations'), ('BLK', 'Blackout Dates'), ('RES', 'Reservations'), ('TKT', 'Ticketing'), ('CHD', 'Children'), ('INF', 'Infants'), ('MIL', 'Military'), ('SRC', 'Senior Citizen'), ('GRP', 'Group')], max_length=10, verbose_name='Category')),
                ('rule_number', models.CharField(max_length=10, verbose_name='Rule Number')),
                ('rule_text', models.TextField(verbose_name='Rule Text')),
                ('rule_text_ar', models.TextField(blank=True, verbose_name='Rule Text (Arabic)')),
                ('cabin_class', models.CharField(blank=True, max_length=20, verbose_name='Cabin Class')),
                ('travel_date_start', models.DateField(blank=True, null=True, verbose_name='Travel Date Start')),
                ('travel_date_end', models.DateField(blank=True, null=True, verbose_name='Travel Date End')),
                ('booking_date_start', models.DateField(blank=True, null=True, verbose_name='Booking Date Start')),
                ('booking_date_end', models.DateField(blank=True, null=True, verbose_name='Booking Date End')),
                ('gds_rule_id', models.CharField(blank=True, max_length=50, verbose_name='GDS Rule ID')),
                ('gds_provider', models.CharField(default='travelport', max_length=20, verbose_name='GDS Provider')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('airline', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('destination', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='farerule_destinations', to='flights.airport')),
                ('origin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='farerule_origins', to='flights.airport')),
            ],
            options={
                'verbose_name': 'fare rule',
                'verbose_name_plural': 'fare rules',
                'ordering': ['fare_basis', 'category', 'rule_number'],
            },
        ),
        migrations.CreateModel(
            name='FlightInventory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('flight_date', models.DateField(verbose_name='Flight Date')),
                ('booking_classes', models.JSONField(blank=True, default=dict, verbose_name='Booking Classes')),
                ('cabin_classes', models.JSONField(blank=True, default=dict, verbose_name='Cabin Classes')),
                ('total_seats', models.PositiveIntegerField(verbose_name='Total Seats')),
                ('available_seats', models.PositiveIntegerField(verbose_name='Available Seats')),
                ('blocked_seats', models.PositiveIntegerField(default=0, verbose_name='Blocked Seats')),
                ('reserved_seats', models.PositiveIntegerField(default=0, verbose_name='Reserved Seats')),
                ('waitlist_seats', models.PositiveIntegerField(default=0, verbose_name='Waitlist Seats')),
                ('inventory_status', models.CharField(choices=[('available', 'Available'), ('limited', 'Limited Availability'), ('waitlist', 'Waitlist Only'), ('sold_out', 'Sold Out'), ('closed', 'Closed for Sale'), ('charter', 'Charter'), ('code_share', 'Code Share')], default='available', max_length=20, verbose_name='Inventory Status')),
                ('override_status', models.CharField(blank=True, max_length=20, verbose_name='Override Status')),
                ('fare_buckets_data', models.JSONField(blank=True, default=dict, verbose_name='Fare Buckets')),
                ('bucket_availability', models.JSONField(blank=True, default=dict, verbose_name='Bucket Availability')),
                ('bookings_count', models.PositiveIntegerField(default=0, verbose_name='Bookings Count')),
                ('revenue_generated', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Revenue Generated')),
                ('load_factor', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Load Factor')),
                ('overbooking_limit', models.PositiveIntegerField(default=0, verbose_name='Overbooking Limit')),
                ('overbooked_seats', models.PositiveIntegerField(default=0, verbose_name='Overbooked Seats')),
                ('no_show_rate', models.DecimalField(decimal_places=2, default=Decimal('5.00'), max_digits=5, verbose_name='No Show Rate')),
                ('group_blocks', models.JSONField(blank=True, default=list, verbose_name='Group Blocks')),
                ('blocked_for_groups', models.PositiveIntegerField(default=0, verbose_name='Blocked for Groups')),
                ('gds_inventory_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Inventory ID')),
                ('gds_last_updated', models.DateTimeField(blank=True, null=True, verbose_name='GDS Last Updated')),
                ('gds_availability_status', models.CharField(blank=True, max_length=20, verbose_name='GDS Availability Status')),
                ('inventory_open_date', models.DateTimeField(verbose_name='Inventory Open Date')),
                ('inventory_close_date', models.DateTimeField(verbose_name='Inventory Close Date')),
                ('last_availability_check', models.DateTimeField(auto_now=True, verbose_name='Last Availability Check')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('airline', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
            ],
            options={
                'verbose_name': 'flight inventory',
                'verbose_name_plural': 'flight inventories',
                'ordering': ['flight_date', 'flight_segment__departure_time'],
            },
        ),
        migrations.CreateModel(
            name='FareBucket',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('bucket_code', models.CharField(max_length=10, verbose_name='Bucket Code')),
                ('booking_class', models.CharField(max_length=1, verbose_name='Booking Class')),
                ('cabin_class', models.CharField(max_length=20, verbose_name='Cabin Class')),
                ('bucket_name', models.CharField(max_length=100, verbose_name='Bucket Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('total_seats', models.PositiveIntegerField(verbose_name='Total Seats')),
                ('available_seats', models.PositiveIntegerField(verbose_name='Available Seats')),
                ('booked_seats', models.PositiveIntegerField(default=0, verbose_name='Booked Seats')),
                ('waitlist_seats', models.PositiveIntegerField(default=0, verbose_name='Waitlist Seats')),
                ('base_fare', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Base Fare')),
                ('current_fare', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Current Fare')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('bucket_status', models.CharField(choices=[('open', 'Open'), ('closed', 'Closed'), ('limited', 'Limited'), ('waitlist', 'Waitlist')], default='open', max_length=20, verbose_name='Bucket Status')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('minimum_advance_days', models.PositiveIntegerField(default=0, verbose_name='Minimum Advance Days')),
                ('maximum_advance_days', models.PositiveIntegerField(blank=True, null=True, verbose_name='Maximum Advance Days')),
                ('stay_requirements', models.JSONField(blank=True, default=dict, verbose_name='Stay Requirements')),
                ('target_load_factor', models.DecimalField(decimal_places=2, default=Decimal('85.00'), max_digits=5, verbose_name='Target Load Factor')),
                ('current_load_factor', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Current Load Factor')),
                ('revenue_generated', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Revenue Generated')),
                ('pricing_rules', models.JSONField(blank=True, default=dict, verbose_name='Pricing Rules')),
                ('last_price_update', models.DateTimeField(blank=True, null=True, verbose_name='Last Price Update')),
                ('next_price_update', models.DateTimeField(blank=True, null=True, verbose_name='Next Price Update')),
                ('gds_bucket_code', models.CharField(blank=True, max_length=20, verbose_name='GDS Bucket Code')),
                ('gds_inventory_key', models.CharField(blank=True, max_length=100, verbose_name='GDS Inventory Key')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('flight_inventory', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventory_fare_buckets', to='flights.flightinventory', verbose_name='Flight Inventory')),
            ],
            options={
                'verbose_name': 'fare bucket',
                'verbose_name_plural': 'fare buckets',
                'ordering': ['bucket_code', 'booking_class'],
            },
        ),
        migrations.CreateModel(
            name='BookingLimit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('limit_name', models.CharField(max_length=200, verbose_name='Limit Name')),
                ('limit_type', models.CharField(choices=[('seat_limit', 'Seat Limit'), ('revenue_limit', 'Revenue Limit'), ('booking_count', 'Booking Count'), ('time_limit', 'Time Limit'), ('agent_limit', 'Agent Limit'), ('corporate_limit', 'Corporate Limit'), ('group_limit', 'Group Limit')], max_length=20, verbose_name='Limit Type')),
                ('limit_scope', models.CharField(choices=[('flight_specific', 'Flight Specific'), ('route_specific', 'Route Specific'), ('airline_specific', 'Airline Specific'), ('agent_specific', 'Agent Specific'), ('corporate_specific', 'Corporate Specific'), ('system_wide', 'System Wide')], max_length=20, verbose_name='Limit Scope')),
                ('limit_value', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Limit Value')),
                ('current_usage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Current Usage')),
                ('usage_percentage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Usage Percentage')),
                ('period_type', models.CharField(choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('yearly', 'Yearly'), ('custom', 'Custom')], default='monthly', max_length=20, verbose_name='Period Type')),
                ('period_start', models.DateTimeField(verbose_name='Period Start')),
                ('period_end', models.DateTimeField(verbose_name='Period End')),
                ('warning_threshold', models.DecimalField(decimal_places=2, default=Decimal('80.00'), max_digits=5, verbose_name='Warning Threshold')),
                ('critical_threshold', models.DecimalField(decimal_places=2, default=Decimal('95.00'), max_digits=5, verbose_name='Critical Threshold')),
                ('action_on_limit', models.CharField(choices=[('block', 'Block Further Bookings'), ('notify', 'Send Notification'), ('override', 'Allow Override'), ('queue', 'Put in Queue'), ('redirect', 'Redirect to Alternative')], default='block', max_length=20, verbose_name='Action on Limit')),
                ('override_allowed', models.BooleanField(default=False, verbose_name='Override Allowed')),
                ('notify_emails', models.JSONField(blank=True, default=list, verbose_name='Notify Emails')),
                ('last_notification_sent', models.DateTimeField(blank=True, null=True, verbose_name='Last Notification Sent')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('is_enforced', models.BooleanField(default=True, verbose_name='Is Enforced')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='booking_limits', to=settings.AUTH_USER_MODEL, verbose_name='Agent')),
                ('airline', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('corporate_client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='corporate_limits', to=settings.AUTH_USER_MODEL, verbose_name='Corporate Client')),
                ('destination', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='limit_destinations', to='flights.airport', verbose_name='Destination')),
                ('origin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='limit_origins', to='flights.airport', verbose_name='Origin')),
                ('override_approver', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='limit_overrides', to=settings.AUTH_USER_MODEL, verbose_name='Override Approver')),
                ('flight_inventory', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.flightinventory', verbose_name='Flight Inventory')),
            ],
            options={
                'verbose_name': 'booking limit',
                'verbose_name_plural': 'booking limits',
                'ordering': ['-period_start', 'limit_name'],
            },
        ),
        migrations.CreateModel(
            name='FlightSearch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('search_type', models.CharField(choices=[('one_way', 'One Way'), ('round_trip', 'Round Trip'), ('multi_city', 'Multi City'), ('open_jaw', 'Open Jaw')], default='one_way', max_length=20, verbose_name='Search Type')),
                ('departure_date', models.DateField(verbose_name='Departure Date')),
                ('return_date', models.DateField(blank=True, null=True, verbose_name='Return Date')),
                ('adults', models.PositiveIntegerField(default=1, verbose_name='Adults')),
                ('children', models.PositiveIntegerField(default=0, verbose_name='Children')),
                ('infants', models.PositiveIntegerField(default=0, verbose_name='Infants')),
                ('infant_on_lap', models.BooleanField(default=False, verbose_name='Infant on Lap')),
                ('cabin_class', models.CharField(choices=[('economy', 'Economy'), ('premium_economy', 'Premium Economy'), ('business', 'Business'), ('first', 'First Class')], default='economy', max_length=20, verbose_name='Cabin Class')),
                ('direct_flights_only', models.BooleanField(default=False, verbose_name='Direct Flights Only')),
                ('max_stops', models.PositiveIntegerField(default=2, verbose_name='Maximum Stops')),
                ('flexible_dates', models.BooleanField(default=False, verbose_name='Flexible Dates')),
                ('flexible_plus_minus', models.PositiveIntegerField(default=3, verbose_name='Flexible Days +/-')),
                ('include_nearby_airports', models.BooleanField(default=False, verbose_name='Include Nearby Airports')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('max_price', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Maximum Price')),
                ('min_price', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Minimum Price')),
                ('gds_providers', models.JSONField(blank=True, default=list, verbose_name='GDS Providers')),
                ('search_hash', models.CharField(db_index=True, max_length=64, unique=True, verbose_name='Search Hash')),
                ('results_count', models.PositiveIntegerField(default=0, verbose_name='Results Count')),
                ('search_duration', models.DurationField(blank=True, null=True, verbose_name='Search Duration')),
                ('cached_until', models.DateTimeField(blank=True, null=True, verbose_name='Cached Until')),
                ('user_agent', models.TextField(blank=True, verbose_name='User Agent')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP Address')),
                ('device_type', models.CharField(blank=True, max_length=50, verbose_name='Device Type')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('destination', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='search_destinations', to='flights.airport', verbose_name='Destination')),
                ('excluded_airlines', models.ManyToManyField(blank=True, related_name='excluded_searches', to='flights.airline', verbose_name='Excluded Airlines')),
                ('origin', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='search_origins', to='flights.airport', verbose_name='Origin')),
                ('preferred_airlines', models.ManyToManyField(blank=True, to='flights.airline', verbose_name='Preferred Airlines')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='flight_searches', to=settings.AUTH_USER_MODEL, verbose_name='User')),
            ],
            options={
                'verbose_name': 'flight search',
                'verbose_name_plural': 'flight searches',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='flightitinerary',
            name='search',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='itineraries', to='flights.flightsearch', verbose_name='Search'),
        ),
        migrations.CreateModel(
            name='FlightSegment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('flight_number', models.CharField(max_length=10, verbose_name='Flight Number')),
                ('departure_time', models.DateTimeField(verbose_name='Departure Time')),
                ('arrival_time', models.DateTimeField(verbose_name='Arrival Time')),
                ('duration', models.DurationField(verbose_name='Duration')),
                ('aircraft_type', models.CharField(blank=True, max_length=10, verbose_name='Aircraft Type')),
                ('cabin_class', models.CharField(max_length=20, verbose_name='Cabin Class')),
                ('booking_class', models.CharField(max_length=1, verbose_name='Booking Class')),
                ('fare_basis', models.CharField(blank=True, max_length=20, verbose_name='Fare Basis')),
                ('stop_count', models.PositiveIntegerField(default=0, verbose_name='Stop Count')),
                ('stop_cities', models.JSONField(blank=True, default=list, verbose_name='Stop Cities')),
                ('mileage', models.PositiveIntegerField(default=0, verbose_name='Mileage')),
                ('code_share', models.BooleanField(default=False, verbose_name='Code Share')),
                ('code_share_flight_number', models.CharField(blank=True, max_length=10, verbose_name='Code Share Flight Number')),
                ('gds_segment_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Segment ID')),
                ('gds_provider', models.CharField(default='travelport', max_length=20, verbose_name='GDS Provider')),
                ('gds_status', models.CharField(choices=[('active', 'Active'), ('canceled', 'Canceled')], default='active', max_length=20, verbose_name='GDS Status')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='Metadata')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('aircraft', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='flights.aircraft', verbose_name='Aircraft')),
                ('airline', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='flights.airline', verbose_name='Airline')),
                ('destination', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='segment_destinations', to='flights.airport', verbose_name='Destination')),
                ('operated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='operated_segments', to='flights.airline', verbose_name='Operated By')),
                ('origin', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='segment_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'flight segment',
                'verbose_name_plural': 'flight segments',
                'ordering': ['departure_time'],
            },
        ),
        migrations.AddField(
            model_name='flightinventory',
            name='flight_segment',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='inventories', to='flights.flightsegment', verbose_name='Flight Segment'),
        ),
        migrations.CreateModel(
            name='ItinerarySegment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('segment_order', models.PositiveIntegerField(default=0, verbose_name='Segment Order')),
                ('layover_duration', models.DurationField(blank=True, null=True, verbose_name='Layover Duration')),
                ('itinerary', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.flightitinerary')),
                ('segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.flightsegment')),
            ],
            options={
                'verbose_name': 'itinerary segment',
                'verbose_name_plural': 'itinerary segments',
                'ordering': ['segment_order'],
            },
        ),
        migrations.AddField(
            model_name='flightitinerary',
            name='segments',
            field=models.ManyToManyField(through='flights.ItinerarySegment', to='flights.flightsegment'),
        ),
        migrations.CreateModel(
            name='LoungeAccess',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('lounge_type', models.CharField(choices=[('airline_lounge', 'Airline Lounge'), ('independent_lounge', 'Independent Lounge'), ('priority_pass', 'Priority Pass'), ('credit_card_lounge', 'Credit Card Lounge'), ('pay_per_use', 'Pay-per-Use Lounge')], default='airline_lounge', max_length=30, verbose_name='Lounge Type')),
                ('access_type', models.CharField(choices=[('single_entry', 'Single Entry'), ('multiple_entries', 'Multiple Entries'), ('unlimited', 'Unlimited'), ('annual_membership', 'Annual Membership')], default='single_entry', max_length=30, verbose_name='Access Type')),
                ('lounge_network', models.CharField(blank=True, max_length=100, verbose_name='Lounge Network')),
                ('terminal_locations', models.JSONField(blank=True, default=dict, verbose_name='Terminal Locations')),
                ('maximum_guests', models.PositiveIntegerField(default=0, verbose_name='Maximum Guests')),
                ('guest_fee_per_person', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='Guest Fee per Person')),
                ('maximum_stay_hours', models.DecimalField(decimal_places=1, default=Decimal('3.0'), max_digits=4, verbose_name='Maximum Stay (hours)')),
                ('facilities', models.JSONField(blank=True, default=list, verbose_name='Facilities')),
                ('food_beverage_included', models.BooleanField(default=True, verbose_name='Food & Beverage Included')),
                ('shower_facilities', models.BooleanField(default=False, verbose_name='Shower Facilities')),
                ('sleeping_pods', models.BooleanField(default=False, verbose_name='Sleeping Pods')),
                ('business_center', models.BooleanField(default=False, verbose_name='Business Center')),
                ('wifi_available', models.BooleanField(default=True, verbose_name='WiFi Available')),
                ('operating_hours', models.JSONField(blank=True, default=dict, verbose_name='Operating Hours')),
                ('is_24_hours', models.BooleanField(default=False, verbose_name='24 Hours Operation')),
                ('boarding_pass_required', models.BooleanField(default=True, verbose_name='Boarding Pass Required')),
                ('flight_class_restriction', models.CharField(blank=True, max_length=20, verbose_name='Flight Class Restriction')),
                ('minimum_connection_time', models.PositiveIntegerField(default=60, verbose_name='Minimum Connection Time (min)')),
                ('ancillary_service', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='lounge_access_service', to='flights.ancillaryservice', verbose_name='Ancillary Service')),
                ('applicable_airports', models.ManyToManyField(to='flights.airport', verbose_name='Applicable Airports')),
            ],
            options={
                'verbose_name': 'lounge access',
                'verbose_name_plural': 'lounge access',
            },
        ),
        migrations.CreateModel(
            name='MarkupRule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('rule_name', models.CharField(max_length=200, verbose_name='Rule Name')),
                ('markup_type', models.CharField(choices=[('percentage', 'Percentage'), ('fixed', 'Fixed Amount'), ('dynamic', 'Dynamic')], default='percentage', max_length=20, verbose_name='Markup Type')),
                ('markup_basis', models.CharField(choices=[('base_fare', 'Base Fare'), ('total_fare', 'Total Fare'), ('net_fare', 'Net Fare'), ('competitor_price', 'Competitor Price')], default='base_fare', max_length=20, verbose_name='Markup Basis')),
                ('agent_type', models.CharField(choices=[('all', 'All Agents'), ('super_agent', 'Super Agent'), ('agent', 'Agent'), ('sub_agent', 'Sub Agent'), ('corporate', 'Corporate')], default='all', max_length=20, verbose_name='Agent Type')),
                ('cabin_class', models.CharField(blank=True, max_length=20, verbose_name='Cabin Class')),
                ('markup_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=5, verbose_name='Markup Rate')),
                ('fixed_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Fixed Amount')),
                ('dynamic_rules', models.JSONField(blank=True, default=dict, verbose_name='Dynamic Rules')),
                ('effective_date', models.DateField(verbose_name='Effective Date')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='Expiry Date')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('minimum_markup', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Minimum Markup')),
                ('maximum_markup', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Maximum Markup')),
                ('domestic_only', models.BooleanField(default=False, verbose_name='Domestic Only')),
                ('international_only', models.BooleanField(default=False, verbose_name='International Only')),
                ('peak_season_only', models.BooleanField(default=False, verbose_name='Peak Season Only')),
                ('last_minute_only', models.BooleanField(default=False, verbose_name='Last Minute Only')),
                ('competitor_markup_rules', models.JSONField(blank=True, default=dict, verbose_name='Competitor Markup Rules')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='markup_rules', to=settings.AUTH_USER_MODEL, verbose_name='Agent')),
                ('airline', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_markup_rules', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('destination', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='markup_destinations', to='flights.airport', verbose_name='Destination')),
                ('origin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='markup_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'markup rule',
                'verbose_name_plural': 'markup rules',
                'ordering': ['-effective_date'],
            },
        ),
        migrations.CreateModel(
            name='MealPreference',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('meal_type', models.CharField(choices=[('standard', 'Standard Meal'), ('vegetarian', 'Vegetarian'), ('vegan', 'Vegan'), ('gluten_free', 'Gluten Free'), ('dairy_free', 'Dairy Free'), ('nut_free', 'Nut Free'), ('halal', 'Halal'), ('kosher', 'Kosher'), ('hindu', 'Hindu Vegetarian'), ('jain', 'Jain'), ('asian_vegetarian', 'Asian Vegetarian'), ('child_meal', 'Child Meal'), ('infant_meal', 'Infant Meal'), ('diabetic', 'Diabetic'), ('low_sodium', 'Low Sodium'), ('low_fat', 'Low Fat'), ('fruit_platter', 'Fruit Platter')], default='standard', max_length=30, verbose_name='Meal Type')),
                ('serving_time', models.CharField(choices=[('breakfast', 'Breakfast'), ('lunch', 'Lunch'), ('dinner', 'Dinner'), ('snack', 'Snack'), ('anytime', 'Anytime')], default='anytime', max_length=20, verbose_name='Serving Time')),
                ('cuisine', models.CharField(blank=True, max_length=50, verbose_name='Cuisine')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('ingredients', models.JSONField(blank=True, default=list, verbose_name='Ingredients')),
                ('allergens', models.JSONField(blank=True, default=list, verbose_name='Allergens')),
                ('nutritional_info', models.JSONField(blank=True, default=dict, verbose_name='Nutritional Information')),
                ('applicable_flight_duration', models.PositiveIntegerField(blank=True, null=True, verbose_name='Applicable Flight Duration (min)')),
                ('minimum_notice_hours', models.PositiveIntegerField(default=24, verbose_name='Minimum Notice (hours)')),
                ('religious_compliance', models.TextField(blank=True, verbose_name='Religious Compliance')),
                ('health_certifications', models.JSONField(blank=True, default=list, verbose_name='Health Certifications')),
                ('ancillary_service', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='meal_preference_service', to='flights.ancillaryservice', verbose_name='Ancillary Service')),
            ],
            options={
                'verbose_name': 'meal preference',
                'verbose_name_plural': 'meal preferences',
            },
        ),
        migrations.CreateModel(
            name='OverrideRule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('override_type', models.CharField(choices=[('inventory_override', 'Inventory Override'), ('pricing_override', 'Pricing Override'), ('commission_override', 'Commission Override'), ('availability_override', 'Availability Override'), ('routing_override', 'Routing Override'), ('fare_rule_override', 'Fare Rule Override')], max_length=30, verbose_name='Override Type')),
                ('override_reference', models.CharField(max_length=50, unique=True, verbose_name='Override Reference')),
                ('override_name', models.CharField(max_length=200, verbose_name='Override Name')),
                ('original_value', models.JSONField(blank=True, default=dict, verbose_name='Original Value')),
                ('override_value', models.JSONField(blank=True, default=dict, verbose_name='Override Value')),
                ('change_description', models.TextField(verbose_name='Change Description')),
                ('status', models.CharField(choices=[('pending', 'Pending Approval'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('active', 'Active'), ('expired', 'Expired'), ('cancelled', 'Cancelled')], default='pending', max_length=20, verbose_name='Status')),
                ('requested_at', models.DateTimeField(auto_now_add=True, verbose_name='Requested At')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Approved At')),
                ('approval_notes', models.TextField(blank=True, verbose_name='Approval Notes')),
                ('rejected_at', models.DateTimeField(blank=True, null=True, verbose_name='Rejected At')),
                ('rejection_reason', models.TextField(blank=True, verbose_name='Rejection Reason')),
                ('valid_from', models.DateTimeField(verbose_name='Valid From')),
                ('valid_until', models.DateTimeField(verbose_name='Valid Until')),
                ('is_recurring', models.BooleanField(default=False, verbose_name='Is Recurring')),
                ('recurrence_pattern', models.JSONField(blank=True, default=dict, verbose_name='Recurrence Pattern')),
                ('expected_impact', models.JSONField(blank=True, default=dict, verbose_name='Expected Impact')),
                ('actual_impact', models.JSONField(blank=True, default=dict, verbose_name='Actual Impact')),
                ('risk_assessment', models.TextField(blank=True, verbose_name='Risk Assessment')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP Address')),
                ('user_agent', models.TextField(blank=True, verbose_name='User Agent')),
                ('gds_override_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Override ID')),
                ('gds_sync_status', models.CharField(choices=[('pending', 'Pending'), ('synced', 'Synced'), ('failed', 'Failed')], default='pending', max_length=20, verbose_name='GDS Sync Status')),
                ('gds_sync_response', models.JSONField(blank=True, default=dict, verbose_name='GDS Sync Response')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('attachments', models.JSONField(blank=True, default=list, verbose_name='Attachments')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='requested_overrides', to=settings.AUTH_USER_MODEL, verbose_name='Requested By')),
                ('airline', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_overrides', to=settings.AUTH_USER_MODEL, verbose_name='Approved By')),
                ('corporate_client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='client_overrides', to=settings.AUTH_USER_MODEL, verbose_name='Corporate Client')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_overrides', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('flight_inventory', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.flightinventory', verbose_name='Flight Inventory')),
                ('rejected_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='rejected_overrides', to=settings.AUTH_USER_MODEL, verbose_name='Rejected By')),
                ('requested_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='override_requests', to=settings.AUTH_USER_MODEL, verbose_name='Requested By')),
                ('route_destination', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='override_destinations', to='flights.airport', verbose_name='Destination')),
                ('route_origin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='override_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'override rule',
                'verbose_name_plural': 'override rules',
                'ordering': ['-requested_at'],
            },
        ),
        migrations.CreateModel(
            name='Passenger',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(choices=[('MR', 'Mr.'), ('MRS', 'Mrs.'), ('MS', 'Ms.'), ('MISS', 'Miss'), ('DR', 'Dr.'), ('PROF', 'Prof.'), ('SHEIKH', 'Sheikh'), ('HAJJ', 'Hajj'), ('UMRAH', 'Umrah')], default='MR', max_length=10, verbose_name='Title')),
                ('first_name', models.CharField(max_length=100, verbose_name='First Name')),
                ('middle_name', models.CharField(blank=True, max_length=100, verbose_name='Middle Name')),
                ('last_name', models.CharField(max_length=100, verbose_name='Last Name')),
                ('arabic_first_name', models.CharField(blank=True, max_length=100, verbose_name='Arabic First Name')),
                ('arabic_last_name', models.CharField(blank=True, max_length=100, verbose_name='Arabic Last Name')),
                ('date_of_birth', models.DateField(verbose_name='Date of Birth')),
                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female')], max_length=1, verbose_name='Gender')),
                ('passenger_type', models.CharField(choices=[('ADT', 'Adult'), ('CHD', 'Child'), ('INF', 'Infant'), ('STU', 'Student'), ('SRC', 'Senior Citizen'), ('MIL', 'Military')], default='ADT', max_length=3, verbose_name='Passenger Type')),
                ('nationality', models.CharField(max_length=2, verbose_name='Nationality')),
                ('contact_email', models.EmailField(blank=True, max_length=254, verbose_name='Contact Email')),
                ('contact_phone', models.CharField(blank=True, max_length=20, verbose_name='Contact Phone')),
                ('contact_phone_country', models.CharField(blank=True, max_length=2, verbose_name='Phone Country')),
                ('passport_number', models.CharField(blank=True, max_length=50, verbose_name='Passport Number')),
                ('passport_issuing_country', models.CharField(blank=True, max_length=2, verbose_name='Passport Issuing Country')),
                ('passport_issue_date', models.DateField(blank=True, null=True, verbose_name='Passport Issue Date')),
                ('passport_expiry_date', models.DateField(blank=True, null=True, verbose_name='Passport Expiry Date')),
                ('national_id', models.CharField(blank=True, max_length=50, verbose_name='National ID')),
                ('iqama_number', models.CharField(blank=True, max_length=50, verbose_name='Iqama Number')),
                ('iqama_expiry', models.DateField(blank=True, null=True, verbose_name='Iqama Expiry')),
                ('frequent_flyer_number', models.CharField(blank=True, max_length=50, verbose_name='Frequent Flyer Number')),
                ('frequent_flyer_tier', models.CharField(blank=True, max_length=20, verbose_name='Frequent Flyer Tier')),
                ('special_requests', models.TextField(blank=True, verbose_name='Special Requests')),
                ('meal_preference', models.CharField(blank=True, max_length=50, verbose_name='Meal Preference')),
                ('seat_preference', models.CharField(blank=True, max_length=20, verbose_name='Seat Preference')),
                ('medical_conditions', models.TextField(blank=True, verbose_name='Medical Conditions')),
                ('wheelchair_assistance', models.BooleanField(default=False, verbose_name='Wheelchair Assistance')),
                ('unaccompanied_minor', models.BooleanField(default=False, verbose_name='Unaccompanied Minor')),
                ('emergency_contact_name', models.CharField(blank=True, max_length=100, verbose_name='Emergency Contact Name')),
                ('emergency_contact_phone', models.CharField(blank=True, max_length=20, verbose_name='Emergency Contact Phone')),
                ('emergency_contact_relationship', models.CharField(blank=True, max_length=50, verbose_name='Emergency Contact Relationship')),
                ('hajj_visa_number', models.CharField(blank=True, max_length=50, verbose_name='Hajj Visa Number')),
                ('umrah_visa_number', models.CharField(blank=True, max_length=50, verbose_name='Umrah Visa Number')),
                ('saudi_entry_date', models.DateField(blank=True, null=True, verbose_name='Saudi Entry Date')),
                ('saudi_exit_date', models.DateField(blank=True, null=True, verbose_name='Saudi Exit Date')),
                ('gds_passenger_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Passenger ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('frequent_flyer_airline', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='flights.airline', verbose_name='Frequent Flyer Airline')),
            ],
            options={
                'verbose_name': 'passenger',
                'verbose_name_plural': 'passengers',
                'ordering': ['last_name', 'first_name'],
            },
        ),
        migrations.CreateModel(
            name='BookingPassenger',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('seat_number', models.CharField(blank=True, max_length=10, verbose_name='Seat Number')),
                ('seat_preference', models.CharField(blank=True, max_length=20, verbose_name='Seat Preference')),
                ('seat_assigned_at', models.DateTimeField(blank=True, null=True, verbose_name='Seat Assigned At')),
                ('ticket_number', models.CharField(blank=True, max_length=50, verbose_name='Ticket Number')),
                ('ticket_status', models.CharField(choices=[('open', 'Open'), ('issued', 'Issued'), ('voided', 'Voided'), ('refunded', 'Refunded')], default='open', max_length=20, verbose_name='Ticket Status')),
                ('ticket_issue_date', models.DateTimeField(blank=True, null=True, verbose_name='Ticket Issue Date')),
                ('fare_basis', models.CharField(blank=True, max_length=20, verbose_name='Fare Basis')),
                ('fare_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Fare Amount')),
                ('tax_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Tax Amount')),
                ('total_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Total Amount')),
                ('baggage_allowance', models.JSONField(blank=True, default=dict, verbose_name='Baggage Allowance')),
                ('excess_baggage', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Excess Baggage Amount')),
                ('meal_preference', models.CharField(blank=True, max_length=50, verbose_name='Meal Preference')),
                ('special_service_request', models.CharField(blank=True, max_length=100, verbose_name='Special Service Request')),
                ('ssr_codes', models.JSONField(blank=True, default=list, verbose_name='SSR Codes')),
                ('frequent_flyer_applied', models.BooleanField(default=False, verbose_name='Frequent Flyer Applied')),
                ('frequent_flyer_points', models.PositiveIntegerField(default=0, verbose_name='Frequent Flyer Points')),
                ('checked_in', models.BooleanField(default=False, verbose_name='Checked In')),
                ('check_in_time', models.DateTimeField(blank=True, null=True, verbose_name='Check-in Time')),
                ('boarding_pass_issued', models.BooleanField(default=False, verbose_name='Boarding Pass Issued')),
                ('boarding_pass_number', models.CharField(blank=True, max_length=50, verbose_name='Boarding Pass Number')),
                ('gds_passenger_ref', models.CharField(blank=True, max_length=100, verbose_name='GDS Passenger Reference')),
                ('gds_ticket_ref', models.CharField(blank=True, max_length=100, verbose_name='GDS Ticket Reference')),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.booking', verbose_name='Booking')),
                ('passenger', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='flights.passenger', verbose_name='Passenger')),
            ],
            options={
                'verbose_name': 'booking passenger',
                'verbose_name_plural': 'booking passengers',
            },
        ),
        migrations.AddField(
            model_name='booking',
            name='passengers',
            field=models.ManyToManyField(through='flights.BookingPassenger', to='flights.passenger'),
        ),
        migrations.CreateModel(
            name='AncillaryBooking',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('service_type', models.CharField(max_length=30, verbose_name='Service Type')),
                ('quantity', models.PositiveIntegerField(default=1, verbose_name='Quantity')),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Unit Price')),
                ('total_price', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Total Price')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('service_details', models.JSONField(blank=True, default=dict, verbose_name='Service Details')),
                ('service_date', models.DateField(blank=True, null=True, verbose_name='Service Date')),
                ('service_time', models.TimeField(blank=True, null=True, verbose_name='Service Time')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('confirmed', 'Confirmed'), ('cancelled', 'Cancelled'), ('used', 'Used'), ('expired', 'Expired'), ('refunded', 'Refunded')], default='pending', max_length=20, verbose_name='Status')),
                ('confirmed_at', models.DateTimeField(blank=True, null=True, verbose_name='Confirmed At')),
                ('cancelled_at', models.DateTimeField(blank=True, null=True, verbose_name='Cancelled At')),
                ('used_at', models.DateTimeField(blank=True, null=True, verbose_name='Used At')),
                ('ssr_code', models.CharField(blank=True, max_length=4, verbose_name='SSR Code')),
                ('gds_service_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Service ID')),
                ('gds_booking_ref', models.CharField(blank=True, max_length=100, verbose_name='GDS Booking Reference')),
                ('commission_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Commission Amount')),
                ('commission_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Commission Rate')),
                ('special_requests', models.TextField(blank=True, verbose_name='Special Requests')),
                ('dietary_restrictions', models.TextField(blank=True, verbose_name='Dietary Restrictions')),
                ('voucher_number', models.CharField(blank=True, max_length=50, verbose_name='Voucher Number')),
                ('voucher_pdf', models.FileField(blank=True, null=True, upload_to='vouchers/%Y/%m/%d/', verbose_name='Voucher PDF')),
                ('qr_code', models.ImageField(blank=True, null=True, upload_to='qrcodes/ancillary/', verbose_name='QR Code')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('ancillary_service', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='flights.ancillaryservice', verbose_name='Ancillary Service')),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ancillary_bookings', to='flights.booking', verbose_name='Booking')),
                ('passenger', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.passenger', verbose_name='Passenger')),
            ],
            options={
                'verbose_name': 'ancillary booking',
                'verbose_name_plural': 'ancillary bookings',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('payment_reference', models.CharField(max_length=50, unique=True, verbose_name='Payment Reference')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Amount')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('payment_method', models.CharField(choices=[('credit_card', 'Credit Card'), ('debit_card', 'Debit Card'), ('bank_transfer', 'Bank Transfer'), ('cash', 'Cash'), ('check', 'Check'), ('wallet', 'Wallet'), ('credit_limit', 'Credit Limit'), ('multiple', 'Multiple Methods')], max_length=20, verbose_name='Payment Method')),
                ('payment_gateway', models.CharField(blank=True, max_length=50, verbose_name='Payment Gateway')),
                ('gateway_transaction_id', models.CharField(blank=True, max_length=100, verbose_name='Gateway Transaction ID')),
                ('gateway_response', models.JSONField(blank=True, default=dict, verbose_name='Gateway Response')),
                ('status', models.CharField(choices=[('initiated', 'Initiated'), ('pending', 'Pending'), ('authorized', 'Authorized'), ('captured', 'Captured'), ('failed', 'Failed'), ('cancelled', 'Cancelled'), ('refunded', 'Refunded'), ('partial_refund', 'Partially Refunded')], default='initiated', max_length=20, verbose_name='Status')),
                ('authorization_code', models.CharField(blank=True, max_length=50, verbose_name='Authorization Code')),
                ('captured_at', models.DateTimeField(blank=True, null=True, verbose_name='Captured At')),
                ('card_last_four', models.CharField(blank=True, max_length=4, verbose_name='Card Last Four')),
                ('card_type', models.CharField(blank=True, max_length=20, verbose_name='Card Type')),
                ('card_network', models.CharField(blank=True, max_length=20, verbose_name='Card Network')),
                ('bank_name', models.CharField(blank=True, max_length=100, verbose_name='Bank Name')),
                ('bank_account', models.CharField(blank=True, max_length=50, verbose_name='Bank Account')),
                ('transfer_reference', models.CharField(blank=True, max_length=100, verbose_name='Transfer Reference')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('is_reconciled', models.BooleanField(default=False, verbose_name='Is Reconciled')),
                ('reconciled_at', models.DateTimeField(blank=True, null=True, verbose_name='Reconciled At')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='flights.booking', verbose_name='Booking')),
            ],
            options={
                'verbose_name': 'payment',
                'verbose_name_plural': 'payments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PNR',
            fields=[
                ('pnr_number', models.CharField(max_length=10, primary_key=True, serialize=False, verbose_name='PNR Number')),
                ('status', models.CharField(choices=[('active', 'Active'), ('cancelled', 'Cancelled'), ('ticketed', 'Ticketed'), ('voided', 'Voided'), ('historical', 'Historical')], default='active', max_length=20, verbose_name='Status')),
                ('creation_date', models.DateTimeField(verbose_name='Creation Date')),
                ('last_modified_date', models.DateTimeField(auto_now=True, verbose_name='Last Modified Date')),
                ('gds_provider', models.CharField(default='travelport', max_length=20, verbose_name='GDS Provider')),
                ('gds_pcc', models.CharField(max_length=10, verbose_name='GDS PCC')),
                ('gds_queue', models.CharField(blank=True, max_length=10, verbose_name='GDS Queue')),
                ('gds_owner', models.CharField(blank=True, max_length=10, verbose_name='GDS Owner')),
                ('pnr_elements', models.JSONField(blank=True, default=dict, verbose_name='PNR Elements')),
                ('segment_information', models.JSONField(blank=True, default=list, verbose_name='Segment Information')),
                ('contact_information', models.JSONField(blank=True, default=dict, verbose_name='Contact Information')),
                ('form_of_payment', models.JSONField(blank=True, default=dict, verbose_name='Form of Payment')),
                ('ticket_information', models.JSONField(blank=True, default=list, verbose_name='Ticket Information')),
                ('remarks', models.JSONField(blank=True, default=list, verbose_name='Remarks')),
                ('ticketing_deadline', models.DateTimeField(blank=True, null=True, verbose_name='Ticketing Deadline')),
                ('void_before', models.DateTimeField(blank=True, null=True, verbose_name='Void Before')),
                ('is_archived', models.BooleanField(default=False, verbose_name='Is Archived')),
                ('archived_date', models.DateTimeField(blank=True, null=True, verbose_name='Archived Date')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pnrs', to='flights.booking', verbose_name='Booking')),
            ],
            options={
                'verbose_name': 'PNR',
                'verbose_name_plural': 'PNRs',
                'ordering': ['-creation_date'],
            },
        ),
        migrations.CreateModel(
            name='PromoCode',
            fields=[
                ('code', models.CharField(max_length=50, primary_key=True, serialize=False, verbose_name='Promo Code')),
                ('name', models.CharField(max_length=200, verbose_name='Promo Name')),
                ('discount_type', models.CharField(choices=[('percentage', 'Percentage'), ('fixed_amount', 'Fixed Amount'), ('free_service', 'Free Service')], default='percentage', max_length=20, verbose_name='Discount Type')),
                ('discount_value', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Discount Value')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('applicable_to', models.CharField(choices=[('all', 'All Bookings'), ('specific_airline', 'Specific Airline'), ('specific_route', 'Specific Route'), ('corporate_client', 'Corporate Client'), ('agent_type', 'Agent Type')], default='all', max_length=20, verbose_name='Applicable To')),
                ('agent_type', models.CharField(blank=True, max_length=20, verbose_name='Agent Type')),
                ('max_usage', models.PositiveIntegerField(blank=True, null=True, verbose_name='Maximum Usage')),
                ('usage_count', models.PositiveIntegerField(default=0, verbose_name='Usage Count')),
                ('max_usage_per_user', models.PositiveIntegerField(default=1, verbose_name='Max Usage Per User')),
                ('user_usage_tracking', models.JSONField(blank=True, default=dict, verbose_name='User Usage Tracking')),
                ('minimum_booking_value', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Minimum Booking Value')),
                ('minimum_passengers', models.PositiveIntegerField(default=1, verbose_name='Minimum Passengers')),
                ('valid_from', models.DateTimeField(verbose_name='Valid From')),
                ('valid_until', models.DateTimeField(verbose_name='Valid Until')),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('expired', 'Expired'), ('used_up', 'Used Up')], default='active', max_length=20, verbose_name='Status')),
                ('cabin_class_restrictions', models.JSONField(blank=True, default=list, verbose_name='Cabin Class Restrictions')),
                ('travel_date_restrictions', models.JSONField(blank=True, default=dict, verbose_name='Travel Date Restrictions')),
                ('booking_date_restrictions', models.JSONField(blank=True, default=dict, verbose_name='Booking Date Restrictions')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('terms_and_conditions', models.TextField(blank=True, verbose_name='Terms and Conditions')),
                ('marketing_message', models.TextField(blank=True, verbose_name='Marketing Message')),
                ('marketing_message_ar', models.TextField(blank=True, verbose_name='Marketing Message (Arabic)')),
                ('is_public', models.BooleanField(default=False, verbose_name='Is Public')),
                ('is_redeemable', models.BooleanField(default=True, verbose_name='Is Redeemable')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('airline', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='flights.airline', verbose_name='Airline')),
                ('corporate_client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='promo_codes', to=settings.AUTH_USER_MODEL, verbose_name='Corporate Client')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_promo_codes', to=settings.AUTH_USER_MODEL, verbose_name='Created By')),
                ('destination', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='promo_destinations', to='flights.airport', verbose_name='Destination')),
                ('origin', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='promo_origins', to='flights.airport', verbose_name='Origin')),
            ],
            options={
                'verbose_name': 'promo code',
                'verbose_name_plural': 'promo codes',
                'ordering': ['-valid_from'],
            },
        ),
        migrations.CreateModel(
            name='Refund',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('refund_reference', models.CharField(max_length=50, unique=True, verbose_name='Refund Reference')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Amount')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('refund_method', models.CharField(choices=[('original', 'Original Payment Method'), ('credit', 'Credit Note'), ('bank_transfer', 'Bank Transfer'), ('cash', 'Cash'), ('wallet', 'Wallet Credit')], max_length=20, verbose_name='Refund Method')),
                ('status', models.CharField(choices=[('requested', 'Requested'), ('approved', 'Approved'), ('processed', 'Processed'), ('completed', 'Completed'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='requested', max_length=20, verbose_name='Status')),
                ('reason', models.TextField(verbose_name='Refund Reason')),
                ('rejection_reason', models.TextField(blank=True, verbose_name='Rejection Reason')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Approved At')),
                ('processing_fee', models.DecimalField(decimal_places=2, default=0, max_digits=10, verbose_name='Processing Fee')),
                ('net_refund_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Net Refund Amount')),
                ('bank_name', models.CharField(blank=True, max_length=100, verbose_name='Bank Name')),
                ('bank_account', models.CharField(blank=True, max_length=50, verbose_name='Bank Account')),
                ('account_holder', models.CharField(blank=True, max_length=100, verbose_name='Account Holder')),
                ('iban', models.CharField(blank=True, max_length=34, verbose_name='IBAN')),
                ('wallet_credit_id', models.CharField(blank=True, max_length=50, verbose_name='Wallet Credit ID')),
                ('requested_at', models.DateTimeField(auto_now_add=True, verbose_name='Requested At')),
                ('processed_at', models.DateTimeField(blank=True, null=True, verbose_name='Processed At')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Completed At')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('is_reconciled', models.BooleanField(default=False, verbose_name='Is Reconciled')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='flight_refunds_approved', to=settings.AUTH_USER_MODEL, verbose_name='Approved By')),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='refunds', to='flights.booking', verbose_name='Booking')),
                ('payment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='refunds', to='flights.payment', verbose_name='Original Payment')),
            ],
            options={
                'verbose_name': 'refund',
                'verbose_name_plural': 'refunds',
                'ordering': ['-requested_at'],
            },
        ),
        migrations.CreateModel(
            name='SeatInventory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('seat_number', models.CharField(max_length=10, verbose_name='Seat Number')),
                ('seat_row', models.CharField(max_length=3, verbose_name='Seat Row')),
                ('seat_column', models.CharField(max_length=1, verbose_name='Seat Column')),
                ('cabin_class', models.CharField(max_length=20, verbose_name='Cabin Class')),
                ('booking_class', models.CharField(max_length=1, verbose_name='Booking Class')),
                ('seat_status', models.CharField(choices=[('available', 'Available'), ('booked', 'Booked'), ('blocked', 'Blocked'), ('reserved', 'Reserved'), ('unavailable', 'Unavailable'), ('emergency_exit', 'Emergency Exit'), ('crew', 'Crew Seat'), ('infant', 'Infant Bassinet'), ('wheelchair', 'Wheelchair Access')], default='available', max_length=20, verbose_name='Seat Status')),
                ('features', models.JSONField(blank=True, default=list, verbose_name='Seat Features')),
                ('base_price', models.DecimalField(decimal_places=2, max_digits=10, verbose_name='Base Price')),
                ('premium_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Premium Price')),
                ('current_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Current Price')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('assignment_date', models.DateTimeField(blank=True, null=True, verbose_name='Assignment Date')),
                ('restrictions', models.JSONField(blank=True, default=list, verbose_name='Restrictions')),
                ('age_restriction', models.PositiveIntegerField(blank=True, null=True, verbose_name='Age Restriction')),
                ('mobility_restriction', models.BooleanField(default=False, verbose_name='Mobility Restriction')),
                ('gds_seat_key', models.CharField(blank=True, max_length=100, verbose_name='GDS Seat Key')),
                ('gds_status', models.CharField(blank=True, max_length=20, verbose_name='GDS Status')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('last_status_change', models.DateTimeField(auto_now=True, verbose_name='Last Status Change')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('assigned_to_booking', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='flights.booking', verbose_name='Assigned to Booking')),
                ('assigned_to_passenger', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='flights.passenger', verbose_name='Assigned to Passenger')),
                ('flight_inventory', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='seats', to='flights.flightinventory', verbose_name='Flight Inventory')),
            ],
            options={
                'verbose_name': 'seat inventory',
                'verbose_name_plural': 'seat inventories',
                'ordering': ['seat_row', 'seat_column'],
            },
        ),
        migrations.CreateModel(
            name='SeatSelection',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('seat_type', models.CharField(choices=[('standard', 'Standard Seat'), ('extra_legroom', 'Extra Legroom Seat'), ('exit_row', 'Exit Row Seat'), ('bulkhead', 'Bulkhead Seat'), ('premium', 'Premium Seat'), ('stretch', 'Stretch Seat'), ('couple', 'Couple Seat'), ('family', 'Family Seat'), ('wheelchair', 'Wheelchair Accessible')], default='standard', max_length=20, verbose_name='Seat Type')),
                ('seat_location', models.CharField(blank=True, choices=[('window', 'Window'), ('middle', 'Middle'), ('aisle', 'Aisle'), ('front', 'Front of Cabin'), ('back', 'Back of Cabin')], max_length=20, verbose_name='Seat Location')),
                ('seat_map_template', models.JSONField(blank=True, default=dict, verbose_name='Seat Map Template')),
                ('features', models.JSONField(blank=True, default=list, verbose_name='Seat Features')),
                ('legroom_inches', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True, verbose_name='Legroom (inches)')),
                ('recline_degrees', models.PositiveIntegerField(blank=True, null=True, verbose_name='Recline (degrees)')),
                ('width_inches', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True, verbose_name='Width (inches)')),
                ('pitch_inches', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True, verbose_name='Pitch (inches)')),
                ('age_restriction', models.PositiveIntegerField(blank=True, null=True, verbose_name='Age Restriction')),
                ('height_restriction_cm', models.PositiveIntegerField(blank=True, null=True, verbose_name='Height Restriction (cm)')),
                ('weight_restriction_kg', models.PositiveIntegerField(blank=True, null=True, verbose_name='Weight Restriction (kg)')),
                ('mobility_requirements', models.TextField(blank=True, verbose_name='Mobility Requirements')),
                ('can_select_in_advance', models.BooleanField(default=True, verbose_name='Can Select in Advance')),
                ('advance_selection_days', models.PositiveIntegerField(default=7, verbose_name='Advance Selection Days')),
                ('automatic_assignment', models.BooleanField(default=False, verbose_name='Automatic Assignment')),
                ('ancillary_service', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='seat_selection_service', to='flights.ancillaryservice', verbose_name='Ancillary Service')),
                ('applicable_aircraft', models.ManyToManyField(blank=True, to='flights.aircraft', verbose_name='Applicable Aircraft')),
            ],
            options={
                'verbose_name': 'seat selection',
                'verbose_name_plural': 'seat selections',
            },
        ),
        migrations.CreateModel(
            name='Tax',
            fields=[
                ('code', models.CharField(max_length=10, primary_key=True, serialize=False, verbose_name='Tax Code')),
                ('tax_type', models.CharField(choices=[('airport_tax', 'Airport Tax'), ('security_tax', 'Security Tax'), ('fuel_surcharge', 'Fuel Surcharge'), ('government_tax', 'Government Tax'), ('vat', 'Value Added Tax (VAT)'), ('tourism_tax', 'Tourism Tax'), ('environmental_tax', 'Environmental Tax'), ('passenger_service', 'Passenger Service Charge'), ('navigation_fee', 'Navigation Fee')], max_length=30, verbose_name='Tax Type')),
                ('description', models.CharField(max_length=200, verbose_name='Description')),
                ('description_ar', models.CharField(blank=True, max_length=200, verbose_name='Description (Arabic)')),
                ('country', models.CharField(max_length=2, verbose_name='Country')),
                ('authority', models.CharField(blank=True, max_length=100, verbose_name='Tax Authority')),
                ('website', models.URLField(blank=True, verbose_name='Website')),
                ('is_percentage', models.BooleanField(default=False, verbose_name='Is Percentage')),
                ('fixed_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Fixed Amount')),
                ('percentage_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Percentage Rate')),
                ('minimum_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Minimum Amount')),
                ('maximum_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Maximum Amount')),
                ('applicable_classes', models.JSONField(blank=True, default=list, verbose_name='Applicable Classes')),
                ('exempt_passenger_types', models.JSONField(blank=True, default=list, verbose_name='Exempt Passenger Types')),
                ('exempt_countries', models.JSONField(blank=True, default=list, verbose_name='Exempt Countries')),
                ('saudi_vat_applicable', models.BooleanField(default=False, verbose_name='Saudi VAT Applicable')),
                ('vat_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='VAT Rate')),
                ('effective_date', models.DateField(verbose_name='Effective Date')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='Expiry Date')),
                ('is_active', models.BooleanField(default=True, verbose_name='Is Active')),
                ('gds_tax_codes', models.JSONField(blank=True, default=dict, verbose_name='GDS Tax Codes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
            ],
            options={
                'verbose_name': 'tax',
                'verbose_name_plural': 'taxes',
                'ordering': ['country', 'code'],
                'indexes': [models.Index(fields=['code', 'is_active'], name='flights_tax_code_dbd808_idx'), models.Index(fields=['country', 'tax_type'], name='flights_tax_country_1ec8f9_idx')],
            },
        ),
        migrations.CreateModel(
            name='Ticket',
            fields=[
                ('ticket_number', models.CharField(max_length=50, primary_key=True, serialize=False, verbose_name='Ticket Number')),
                ('status', models.CharField(choices=[('open', 'Open'), ('issued', 'Issued'), ('voided', 'Voided'), ('refunded', 'Refunded'), ('exchanged', 'Exchanged'), ('used', 'Used')], default='open', max_length=20, verbose_name='Status')),
                ('issue_date', models.DateTimeField(blank=True, null=True, verbose_name='Issue Date')),
                ('void_date', models.DateTimeField(blank=True, null=True, verbose_name='Void Date')),
                ('refund_date', models.DateTimeField(blank=True, null=True, verbose_name='Refund Date')),
                ('fare_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Fare Amount')),
                ('tax_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Tax Amount')),
                ('commission_amount', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Commission Amount')),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Total Amount')),
                ('currency', models.CharField(default='SAR', max_length=3, verbose_name='Currency')),
                ('flight_coupons', models.JSONField(blank=True, default=list, verbose_name='Flight Coupons')),
                ('validity_period', models.JSONField(blank=True, default=dict, verbose_name='Validity Period')),
                ('endorsement_restrictions', models.TextField(blank=True, verbose_name='Endorsement/Restrictions')),
                ('form_of_payment', models.CharField(blank=True, max_length=50, verbose_name='Form of Payment')),
                ('payment_reference', models.CharField(blank=True, max_length=100, verbose_name='Payment Reference')),
                ('gds_ticket_id', models.CharField(blank=True, max_length=100, verbose_name='GDS Ticket ID')),
                ('gds_provider', models.CharField(default='travelport', max_length=20, verbose_name='GDS Provider')),
                ('gds_issuing_pcc', models.CharField(blank=True, max_length=10, verbose_name='GDS Issuing PCC')),
                ('e_ticket_pdf', models.FileField(blank=True, null=True, upload_to='e-tickets/%Y/%m/%d/', verbose_name='E-Ticket PDF')),
                ('itinerary_receipt', models.FileField(blank=True, null=True, upload_to='receipts/%Y/%m/%d/', verbose_name='Itinerary Receipt')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('booking_passenger', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tickets', to='flights.bookingpassenger', verbose_name='Booking Passenger')),
                ('pnr', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tickets', to='flights.pnr', verbose_name='PNR')),
            ],
            options={
                'verbose_name': 'ticket',
                'verbose_name_plural': 'tickets',
                'ordering': ['-issue_date'],
            },
        ),
        migrations.CreateModel(
            name='TravelInsurance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('coverage_type', models.CharField(choices=[('basic', 'Basic Coverage'), ('comprehensive', 'Comprehensive Coverage'), ('premium', 'Premium Coverage'), ('annual_multi_trip', 'Annual Multi-trip'), ('senior', 'Senior Citizen'), ('student', 'Student'), ('family', 'Family'), ('business', 'Business Traveler')], default='basic', max_length=30, verbose_name='Coverage Type')),
                ('insurance_provider', models.CharField(max_length=100, verbose_name='Insurance Provider')),
                ('policy_number_prefix', models.CharField(blank=True, max_length=10, verbose_name='Policy Number Prefix')),
                ('coverage_amount', models.DecimalField(decimal_places=2, max_digits=12, verbose_name='Coverage Amount')),
                ('coverage_currency', models.CharField(default='SAR', max_length=3, verbose_name='Coverage Currency')),
                ('medical_coverage', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Medical Coverage')),
                ('trip_cancellation', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Trip Cancellation Coverage')),
                ('baggage_loss', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Baggage Loss Coverage')),
                ('flight_delay', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Flight Delay Coverage')),
                ('personal_accident', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Personal Accident Coverage')),
                ('minimum_duration', models.PositiveIntegerField(default=1, verbose_name='Minimum Duration')),
                ('maximum_duration', models.PositiveIntegerField(default=365, verbose_name='Maximum Duration')),
                ('duration_unit', models.CharField(choices=[('days', 'Days'), ('weeks', 'Weeks'), ('months', 'Months'), ('annual', 'Annual')], default='days', max_length=10, verbose_name='Duration Unit')),
                ('minimum_age', models.PositiveIntegerField(default=0, verbose_name='Minimum Age')),
                ('maximum_age', models.PositiveIntegerField(blank=True, null=True, verbose_name='Maximum Age')),
                ('senior_age_threshold', models.PositiveIntegerField(default=60, verbose_name='Senior Age Threshold')),
                ('covered_countries', models.JSONField(blank=True, default=list, verbose_name='Covered Countries')),
                ('excluded_countries', models.JSONField(blank=True, default=list, verbose_name='Excluded Countries')),
                ('worldwide_coverage', models.BooleanField(default=False, verbose_name='Worldwide Coverage')),
                ('deductible_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Deductible Amount')),
                ('claims_process', models.TextField(blank=True, verbose_name='Claims Process')),
                ('emergency_contact', models.TextField(blank=True, verbose_name='Emergency Contact')),
                ('policy_document', models.FileField(blank=True, null=True, upload_to='insurance/policies/', verbose_name='Policy Document')),
                ('terms_and_conditions', models.TextField(blank=True, verbose_name='Terms and Conditions')),
                ('ancillary_service', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='travel_insurance_service', to='flights.ancillaryservice', verbose_name='Ancillary Service')),
            ],
            options={
                'verbose_name': 'travel insurance',
                'verbose_name_plural': 'travel insurance',
            },
        ),
        migrations.AddIndex(
            model_name='ancillaryservice',
            index=models.Index(fields=['service_code', 'is_active'], name='flights_anc_service_87fa7f_idx'),
        ),
        migrations.AddIndex(
            model_name='ancillaryservice',
            index=models.Index(fields=['service_type', 'is_available'], name='flights_anc_service_2c6165_idx'),
        ),
        migrations.AddIndex(
            model_name='ancillaryservice',
            index=models.Index(fields=['is_active', 'available_until'], name='flights_anc_is_acti_af8797_idx'),
        ),
        migrations.AddIndex(
            model_name='availabilitycache',
            index=models.Index(fields=['cache_key'], name='flights_ava_cache_k_a4351b_idx'),
        ),
        migrations.AddIndex(
            model_name='availabilitycache',
            index=models.Index(fields=['route_hash', 'departure_date'], name='flights_ava_route_h_8cc5a7_idx'),
        ),
        migrations.AddIndex(
            model_name='availabilitycache',
            index=models.Index(fields=['cache_status', 'expires_at'], name='flights_ava_cache_s_ac7ebc_idx'),
        ),
        migrations.AddIndex(
            model_name='availabilitycache',
            index=models.Index(fields=['last_accessed'], name='flights_ava_last_ac_5995e1_idx'),
        ),
        migrations.AddIndex(
            model_name='baggagerule',
            index=models.Index(fields=['airline', 'cabin_class'], name='flights_bag_airline_3266df_idx'),
        ),
        migrations.AddIndex(
            model_name='baggagerule',
            index=models.Index(fields=['origin', 'destination'], name='flights_bag_origin__2d9b51_idx'),
        ),
        migrations.AddIndex(
            model_name='bookinghistory',
            index=models.Index(fields=['booking', 'created_at'], name='flights_boo_booking_258bbc_idx'),
        ),
        migrations.AddIndex(
            model_name='bookinghistory',
            index=models.Index(fields=['history_type', 'created_at'], name='flights_boo_history_1195e2_idx'),
        ),
        migrations.AddIndex(
            model_name='bookinghistory',
            index=models.Index(fields=['created_by', 'created_at'], name='flights_boo_created_36752d_idx'),
        ),
        migrations.AddIndex(
            model_name='commissionrule',
            index=models.Index(fields=['airline', 'is_active'], name='flights_com_airline_c0c50e_idx'),
        ),
        migrations.AddIndex(
            model_name='commissionrule',
            index=models.Index(fields=['agent_type', 'effective_date'], name='flights_com_agent_t_6a9fe9_idx'),
        ),
        migrations.AddIndex(
            model_name='commissionrule',
            index=models.Index(fields=['is_active', 'expiry_date'], name='flights_com_is_acti_51baea_idx'),
        ),
        migrations.AddIndex(
            model_name='corporatefare',
            index=models.Index(fields=['corporate_client', 'status'], name='flights_cor_corpora_01c7f2_idx'),
        ),
        migrations.AddIndex(
            model_name='corporatefare',
            index=models.Index(fields=['airline', 'origin', 'destination'], name='flights_cor_airline_68fed3_idx'),
        ),
        migrations.AddIndex(
            model_name='corporatefare',
            index=models.Index(fields=['status', 'expiry_date'], name='flights_cor_status_54b16a_idx'),
        ),
        migrations.AddIndex(
            model_name='corporatefare',
            index=models.Index(fields=['contract_number'], name='flights_cor_contrac_abbab5_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='corporatefare',
            unique_together={('corporate_client', 'airline', 'origin', 'destination', 'cabin_class')},
        ),
        migrations.AddIndex(
            model_name='fare',
            index=models.Index(fields=['fare_basis', 'airline'], name='flights_far_fare_ba_4e09bb_idx'),
        ),
        migrations.AddIndex(
            model_name='fare',
            index=models.Index(fields=['origin', 'destination', 'effective_date'], name='flights_far_origin__1bc9fb_idx'),
        ),
        migrations.AddIndex(
            model_name='fare',
            index=models.Index(fields=['status', 'expiry_date'], name='flights_far_status_3d7d24_idx'),
        ),
        migrations.AddIndex(
            model_name='fare',
            index=models.Index(fields=['corporate_client', 'status'], name='flights_far_corpora_ace38a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='fare',
            unique_together={('fare_basis', 'airline', 'origin', 'destination', 'cabin_class')},
        ),
        migrations.AddIndex(
            model_name='farecomponent',
            index=models.Index(fields=['fare', 'component_type'], name='flights_far_fare_id_996810_idx'),
        ),
        migrations.AddIndex(
            model_name='farecomponent',
            index=models.Index(fields=['code', 'passenger_type'], name='flights_far_code_aad525_idx'),
        ),
        migrations.AddIndex(
            model_name='farerule',
            index=models.Index(fields=['fare_basis', 'airline'], name='flights_far_fare_ba_f9f214_idx'),
        ),
        migrations.AddIndex(
            model_name='farerule',
            index=models.Index(fields=['category', 'travel_date_start'], name='flights_far_categor_c88794_idx'),
        ),
        migrations.AddIndex(
            model_name='farebucket',
            index=models.Index(fields=['flight_inventory', 'bucket_code'], name='flights_far_flight__c65b61_idx'),
        ),
        migrations.AddIndex(
            model_name='farebucket',
            index=models.Index(fields=['bucket_status', 'available_seats'], name='flights_far_bucket__4333a4_idx'),
        ),
        migrations.AddIndex(
            model_name='farebucket',
            index=models.Index(fields=['current_load_factor', 'target_load_factor'], name='flights_far_current_77c192_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='farebucket',
            unique_together={('flight_inventory', 'bucket_code', 'booking_class')},
        ),
        migrations.AddIndex(
            model_name='bookinglimit',
            index=models.Index(fields=['limit_type', 'is_active'], name='flights_boo_limit_t_8a58a8_idx'),
        ),
        migrations.AddIndex(
            model_name='bookinglimit',
            index=models.Index(fields=['period_start', 'period_end'], name='flights_boo_period__610fd5_idx'),
        ),
        migrations.AddIndex(
            model_name='bookinglimit',
            index=models.Index(fields=['usage_percentage', 'warning_threshold'], name='flights_boo_usage_p_f7aad6_idx'),
        ),
        migrations.AddIndex(
            model_name='flightsearch',
            index=models.Index(fields=['search_hash'], name='flights_fli_search__754426_idx'),
        ),
        migrations.AddIndex(
            model_name='flightsearch',
            index=models.Index(fields=['user', 'created_at'], name='flights_fli_user_id_9a2e3f_idx'),
        ),
        migrations.AddIndex(
            model_name='flightsearch',
            index=models.Index(fields=['origin', 'destination', 'departure_date'], name='flights_fli_origin__e6a088_idx'),
        ),
        migrations.AddIndex(
            model_name='flightsearch',
            index=models.Index(fields=['cached_until'], name='flights_fli_cached__be0dac_idx'),
        ),
        migrations.AddIndex(
            model_name='flightsegment',
            index=models.Index(fields=['airline', 'flight_number', 'departure_time'], name='flights_fli_airline_d8430b_idx'),
        ),
        migrations.AddIndex(
            model_name='flightsegment',
            index=models.Index(fields=['origin', 'destination', 'departure_time'], name='flights_fli_origin__d935d2_idx'),
        ),
        migrations.AddIndex(
            model_name='flightsegment',
            index=models.Index(fields=['gds_segment_id'], name='flights_fli_gds_seg_a35296_idx'),
        ),
        migrations.AddIndex(
            model_name='flightinventory',
            index=models.Index(fields=['flight_segment', 'flight_date'], name='flights_fli_flight__1ac3d1_idx'),
        ),
        migrations.AddIndex(
            model_name='flightinventory',
            index=models.Index(fields=['airline', 'flight_date'], name='flights_fli_airline_e6028d_idx'),
        ),
        migrations.AddIndex(
            model_name='flightinventory',
            index=models.Index(fields=['inventory_status', 'available_seats'], name='flights_fli_invento_5a264e_idx'),
        ),
        migrations.AddIndex(
            model_name='flightinventory',
            index=models.Index(fields=['gds_last_updated'], name='flights_fli_gds_las_805671_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='flightinventory',
            unique_together={('flight_segment', 'flight_date')},
        ),
        migrations.AlterUniqueTogether(
            name='itinerarysegment',
            unique_together={('itinerary', 'segment_order')},
        ),
        migrations.AddIndex(
            model_name='flightitinerary',
            index=models.Index(fields=['search', 'total_fare'], name='flights_fli_search__98c4b7_idx'),
        ),
        migrations.AddIndex(
            model_name='flightitinerary',
            index=models.Index(fields=['expires_at'], name='flights_fli_expires_654556_idx'),
        ),
        migrations.AddIndex(
            model_name='flightitinerary',
            index=models.Index(fields=['gds_offer_id'], name='flights_fli_gds_off_fe8693_idx'),
        ),
        migrations.AddIndex(
            model_name='markuprule',
            index=models.Index(fields=['airline', 'is_active'], name='flights_mar_airline_1b9342_idx'),
        ),
        migrations.AddIndex(
            model_name='markuprule',
            index=models.Index(fields=['agent_type', 'effective_date'], name='flights_mar_agent_t_c10972_idx'),
        ),
        migrations.AddIndex(
            model_name='overriderule',
            index=models.Index(fields=['override_type', 'status'], name='flights_ove_overrid_4a7a41_idx'),
        ),
        migrations.AddIndex(
            model_name='overriderule',
            index=models.Index(fields=['status', 'valid_until'], name='flights_ove_status_50b56f_idx'),
        ),
        migrations.AddIndex(
            model_name='overriderule',
            index=models.Index(fields=['agent', 'requested_at'], name='flights_ove_agent_i_e0d9a5_idx'),
        ),
        migrations.AddIndex(
            model_name='overriderule',
            index=models.Index(fields=['override_reference'], name='flights_ove_overrid_12bccc_idx'),
        ),
        migrations.AddIndex(
            model_name='passenger',
            index=models.Index(fields=['passport_number'], name='flights_pas_passpor_0f8a8e_idx'),
        ),
        migrations.AddIndex(
            model_name='passenger',
            index=models.Index(fields=['national_id'], name='flights_pas_nationa_4f7a08_idx'),
        ),
        migrations.AddIndex(
            model_name='passenger',
            index=models.Index(fields=['frequent_flyer_number'], name='flights_pas_frequen_64ca99_idx'),
        ),
        migrations.AddIndex(
            model_name='bookingpassenger',
            index=models.Index(fields=['ticket_number'], name='flights_boo_ticket__127722_idx'),
        ),
        migrations.AddIndex(
            model_name='bookingpassenger',
            index=models.Index(fields=['booking', 'ticket_status'], name='flights_boo_booking_8bbfdc_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='bookingpassenger',
            unique_together={('booking', 'passenger')},
        ),
        migrations.AddIndex(
            model_name='booking',
            index=models.Index(fields=['booking_reference'], name='flights_boo_booking_5fe29e_idx'),
        ),
        migrations.AddIndex(
            model_name='booking',
            index=models.Index(fields=['pnr'], name='flights_boo_pnr_42960e_idx'),
        ),
        migrations.AddIndex(
            model_name='booking',
            index=models.Index(fields=['agent', 'status'], name='flights_boo_agent_i_8bfa24_idx'),
        ),
        migrations.AddIndex(
            model_name='booking',
            index=models.Index(fields=['status', 'created_at'], name='flights_boo_status_175b45_idx'),
        ),
        migrations.AddIndex(
            model_name='booking',
            index=models.Index(fields=['payment_status', 'due_amount'], name='flights_boo_payment_18ff0c_idx'),
        ),
        migrations.AddIndex(
            model_name='ancillarybooking',
            index=models.Index(fields=['booking', 'status'], name='flights_anc_booking_d20bf3_idx'),
        ),
        migrations.AddIndex(
            model_name='ancillarybooking',
            index=models.Index(fields=['ancillary_service', 'service_date'], name='flights_anc_ancilla_2a0922_idx'),
        ),
        migrations.AddIndex(
            model_name='ancillarybooking',
            index=models.Index(fields=['voucher_number'], name='flights_anc_voucher_384d0d_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['payment_reference'], name='flights_pay_payment_b47daa_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['booking', 'status'], name='flights_pay_booking_719d70_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['status', 'created_at'], name='flights_pay_status_d1ebbf_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['gateway_transaction_id'], name='flights_pay_gateway_8c3b19_idx'),
        ),
        migrations.AddIndex(
            model_name='pnr',
            index=models.Index(fields=['pnr_number', 'status'], name='flights_pnr_pnr_num_5d3cbe_idx'),
        ),
        migrations.AddIndex(
            model_name='pnr',
            index=models.Index(fields=['gds_provider', 'creation_date'], name='flights_pnr_gds_pro_a7479d_idx'),
        ),
        migrations.AddIndex(
            model_name='promocode',
            index=models.Index(fields=['code', 'status'], name='flights_pro_code_09c4e4_idx'),
        ),
        migrations.AddIndex(
            model_name='promocode',
            index=models.Index(fields=['applicable_to', 'valid_until'], name='flights_pro_applica_862b10_idx'),
        ),
        migrations.AddIndex(
            model_name='promocode',
            index=models.Index(fields=['status', 'valid_until'], name='flights_pro_status_fb7b9e_idx'),
        ),
        migrations.AddIndex(
            model_name='refund',
            index=models.Index(fields=['refund_reference'], name='flights_ref_refund__13b7f9_idx'),
        ),
        migrations.AddIndex(
            model_name='refund',
            index=models.Index(fields=['booking', 'status'], name='flights_ref_booking_eba2b8_idx'),
        ),
        migrations.AddIndex(
            model_name='refund',
            index=models.Index(fields=['status', 'requested_at'], name='flights_ref_status_b8fdd6_idx'),
        ),
        migrations.AddIndex(
            model_name='seatinventory',
            index=models.Index(fields=['flight_inventory', 'seat_number'], name='flights_sea_flight__f3316d_idx'),
        ),
        migrations.AddIndex(
            model_name='seatinventory',
            index=models.Index(fields=['seat_status', 'cabin_class'], name='flights_sea_seat_st_533fc0_idx'),
        ),
        migrations.AddIndex(
            model_name='seatinventory',
            index=models.Index(fields=['assigned_to_booking', 'seat_status'], name='flights_sea_assigne_3eca9e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='seatinventory',
            unique_together={('flight_inventory', 'seat_number')},
        ),
        migrations.AddIndex(
            model_name='ticket',
            index=models.Index(fields=['ticket_number', 'status'], name='flights_tic_ticket__c1d3bb_idx'),
        ),
        migrations.AddIndex(
            model_name='ticket',
            index=models.Index(fields=['pnr', 'status'], name='flights_tic_pnr_id_38c001_idx'),
        ),
        migrations.AddIndex(
            model_name='ticket',
            index=models.Index(fields=['issue_date'], name='flights_tic_issue_d_da7914_idx'),
        ),
    ]
